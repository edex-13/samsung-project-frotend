import{g as bn,r as D,j as S,K as M}from"./index-BzG-UDRL.js";import{u as Yt,v as tn,Z as We,E as zn,x as Rt,r as xe}from"./nivo-legends.es-DbnQh6rU.js";import{x as an,y as Ht,z as jt,m as Gn,B as N,D as mn,E as un,G as xn,t as qe,H as Bt,J as Le,K as It,M as Wt,N as qt,O as Lt,Q as Xt,S as zt,T as Xe,U as Gt,V as ze,X as Ge,Z as Ke,$ as Kt,a0 as Vt,a1 as Ve,a2 as Je,s as Qe,a3 as Jt,a4 as Ze,a5 as Qt,a6 as Zt,a7 as nt,a8 as nr,a9 as er,aa as tr,v as rr,w as ir,ab as ar,ac as ur,ad as or,ae as fr,af as cr,ag as sr,ah as lr,ai as gr,aj as hr,ak as dr,al as mr,am as xr,an as vr,ao as yr,ap as pr,aq as ve,ar as ye,o as Pn,as as br,at as Mr,b as et,u as wr,a as nn}from"./isEqual-BBbCH6bZ.js";function tt(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Kn(n){let e=n,t=n;n.length===1&&(e=(a,o)=>n(a)-o,t=kr(n));function r(a,o,f,c){for(f==null&&(f=0),c==null&&(c=a.length);f<c;){const s=f+c>>>1;t(a[s],o)<0?f=s+1:c=s}return f}function i(a,o,f,c){for(f==null&&(f=0),c==null&&(c=a.length);f<c;){const s=f+c>>>1;t(a[s],o)>0?c=s:f=s+1}return f}function u(a,o,f,c){f==null&&(f=0),c==null&&(c=a.length);const s=r(a,o,f,c-1);return s>f&&e(a[s-1],o)>-e(a[s],o)?s-1:s}return{left:r,center:u,right:i}}function kr(n){return(e,t)=>tt(n(e),t)}function Tr(n){return n===null?NaN:+n}const Cr=Kn(tt),$r=Cr.right;Kn(Tr).center;var Yn=Math.sqrt(50),Rn=Math.sqrt(10),Hn=Math.sqrt(2);function jn(n,e,t){var r,i=-1,u,a,o;if(e=+e,n=+n,t=+t,n===e&&t>0)return[n];if((r=e<n)&&(u=n,n=e,e=u),(o=rt(n,e,t))===0||!isFinite(o))return[];if(o>0){let f=Math.round(n/o),c=Math.round(e/o);for(f*o<n&&++f,c*o>e&&--c,a=new Array(u=c-f+1);++i<u;)a[i]=(f+i)*o}else{o=-o;let f=Math.round(n*o),c=Math.round(e*o);for(f/o<n&&++f,c/o>e&&--c,a=new Array(u=c-f+1);++i<u;)a[i]=(f+i)/o}return r&&a.reverse(),a}function rt(n,e,t){var r=(e-n)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=Yn?10:u>=Rn?5:u>=Hn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=Yn?10:u>=Rn?5:u>=Hn?2:1)}function Bn(n,e,t){var r=Math.abs(e-n)/Math.max(0,t),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=Yn?i*=10:u>=Rn?i*=5:u>=Hn&&(i*=2),e<n?-i:i}function Sr(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,u=new Array(i);++r<i;)u[r]=n+r*t;return u}function Vn(){var n=Yt().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,u,a,o=!1,f=0,c=0,s=.5;delete n.unknown;function g(){var l=e().length,h=i<r,d=h?i:r,m=h?r:i;u=(m-d)/Math.max(1,l-f+c*2),o&&(u=Math.floor(u)),d+=(m-d-u*(l-f))*s,a=u*(1-f),o&&(d=Math.round(d),a=Math.round(a));var v=Sr(l).map(function(p){return d+u*p});return t(h?v.reverse():v)}return n.domain=function(l){return arguments.length?(e(l),g()):e()},n.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,g()):[r,i]},n.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,o=!0,g()},n.bandwidth=function(){return a},n.step=function(){return u},n.round=function(l){return arguments.length?(o=!!l,g()):o},n.padding=function(l){return arguments.length?(f=Math.min(1,c=+l),g()):f},n.paddingInner=function(l){return arguments.length?(f=Math.min(1,l),g()):f},n.paddingOuter=function(l){return arguments.length?(c=+l,g()):c},n.align=function(l){return arguments.length?(s=Math.max(0,Math.min(1,l)),g()):s},n.copy=function(){return Vn(e(),[r,i]).round(o).paddingInner(f).paddingOuter(c).align(s)},tn.apply(g(),arguments)}function it(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return it(e())},n}function Ar(){return it(Vn.apply(null,arguments).paddingInner(1))}function Jn(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function at(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function ln(){}var on=.7,vn=1/on,en="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dr=/^#([0-9a-f]{3,8})$/,_r=new RegExp("^rgb\\("+[en,en,en]+"\\)$"),Ur=new RegExp("^rgb\\("+[R,R,R]+"\\)$"),Fr=new RegExp("^rgba\\("+[en,en,en,fn]+"\\)$"),Er=new RegExp("^rgba\\("+[R,R,R,fn]+"\\)$"),Nr=new RegExp("^hsl\\("+[fn,R,R]+"\\)$"),Or=new RegExp("^hsla\\("+[fn,R,R,fn]+"\\)$"),pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jn(ln,cn,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:be,formatHex:be,formatHsl:Pr,formatRgb:Me,toString:Me});function be(){return this.rgb().formatHex()}function Pr(){return ut(this).formatHsl()}function Me(){return this.rgb().formatRgb()}function cn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Dr.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?we(e):t===3?new U(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?dn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?dn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_r.exec(n))?new U(e[1],e[2],e[3],1):(e=Ur.exec(n))?new U(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fr.exec(n))?dn(e[1],e[2],e[3],e[4]):(e=Er.exec(n))?dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nr.exec(n))?Ce(e[1],e[2]/100,e[3]/100,1):(e=Or.exec(n))?Ce(e[1],e[2]/100,e[3]/100,e[4]):pe.hasOwnProperty(n)?we(pe[n]):n==="transparent"?new U(NaN,NaN,NaN,0):null}function we(n){return new U(n>>16&255,n>>8&255,n&255,1)}function dn(n,e,t,r){return r<=0&&(n=e=t=NaN),new U(n,e,t,r)}function Yr(n){return n instanceof ln||(n=cn(n)),n?(n=n.rgb(),new U(n.r,n.g,n.b,n.opacity)):new U}function In(n,e,t,r){return arguments.length===1?Yr(n):new U(n,e,t,r??1)}function U(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Jn(U,In,at(ln,{brighter:function(n){return n=n==null?vn:Math.pow(vn,n),new U(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=n==null?on:Math.pow(on,n),new U(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ke,formatHex:ke,formatRgb:Te,toString:Te}));function ke(){return"#"+An(this.r)+An(this.g)+An(this.b)}function Te(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(n===1?")":", "+n+")")}function An(n){return n=Math.max(0,Math.min(255,Math.round(n)||0)),(n<16?"0":"")+n.toString(16)}function Ce(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Y(n,e,t,r)}function ut(n){if(n instanceof Y)return new Y(n.h,n.s,n.l,n.opacity);if(n instanceof ln||(n=cn(n)),!n)return new Y;if(n instanceof Y)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),u=Math.max(e,t,r),a=NaN,o=u-i,f=(u+i)/2;return o?(e===u?a=(t-r)/o+(t<r)*6:t===u?a=(r-e)/o+2:a=(e-t)/o+4,o/=f<.5?u+i:2-u-i,a*=60):o=f>0&&f<1?0:a,new Y(a,o,f,n.opacity)}function Rr(n,e,t,r){return arguments.length===1?ut(n):new Y(n,e,t,r??1)}function Y(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Jn(Y,Rr,at(ln,{brighter:function(n){return n=n==null?vn:Math.pow(vn,n),new Y(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?on:Math.pow(on,n),new Y(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new U(Dn(n>=240?n-240:n+120,i,r),Dn(n,i,r),Dn(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(n===1?")":", "+n+")")}}));function Dn(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Qn=n=>()=>n;function Hr(n,e){return function(t){return n+t*e}}function jr(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Br(n){return(n=+n)==1?ot:function(e,t){return t-e?jr(e,t,n):Qn(isNaN(e)?t:e)}}function ot(n,e){var t=e-n;return t?Hr(n,t):Qn(isNaN(n)?e:n)}const $e=function n(e){var t=Br(e);function r(i,u){var a=t((i=In(i)).r,(u=In(u)).r),o=t(i.g,u.g),f=t(i.b,u.b),c=ot(i.opacity,u.opacity);return function(s){return i.r=a(s),i.g=o(s),i.b=f(s),i.opacity=c(s),i+""}}return r.gamma=n,r}(1);function Ir(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(u){for(i=0;i<t;++i)r[i]=n[i]*(1-u)+e[i]*u;return r}}function Wr(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qr(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),u=new Array(t),a;for(a=0;a<r;++a)i[a]=Zn(n[a],e[a]);for(;a<t;++a)u[a]=e[a];return function(o){for(a=0;a<r;++a)u[a]=i[a](o);return u}}function Lr(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function yn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Xr(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Zn(n[i],e[i]):r[i]=e[i];return function(u){for(i in t)r[i]=t[i](u);return r}}var Wn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(Wn.source,"g");function zr(n){return function(){return n}}function Gr(n){return function(e){return n(e)+""}}function Kr(n,e){var t=Wn.lastIndex=_n.lastIndex=0,r,i,u,a=-1,o=[],f=[];for(n=n+"",e=e+"";(r=Wn.exec(n))&&(i=_n.exec(e));)(u=i.index)>t&&(u=e.slice(t,u),o[a]?o[a]+=u:o[++a]=u),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,f.push({i:a,x:yn(r,i)})),t=_n.lastIndex;return t<e.length&&(u=e.slice(t),o[a]?o[a]+=u:o[++a]=u),o.length<2?f[0]?Gr(f[0].x):zr(e):(e=f.length,function(c){for(var s=0,g;s<e;++s)o[(g=f[s]).i]=g.x(c);return o.join("")})}function Zn(n,e){var t=typeof e,r;return e==null||t==="boolean"?Qn(e):(t==="number"?yn:t==="string"?(r=cn(e))?(e=r,$e):Kr:e instanceof cn?$e:e instanceof Date?Lr:Wr(e)?Ir:Array.isArray(e)?qr:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Xr:yn)(n,e)}function Vr(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Jr(n){return function(){return n}}function Qr(n){return+n}var Se=[0,1];function Z(n){return n}function qn(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Jr(isNaN(e)?NaN:.5)}function Zr(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function ni(n,e,t){var r=n[0],i=n[1],u=e[0],a=e[1];return i<r?(r=qn(i,r),u=t(a,u)):(r=qn(r,i),u=t(u,a)),function(o){return u(r(o))}}function ei(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),u=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=qn(n[a],n[a+1]),u[a]=t(e[a],e[a+1]);return function(o){var f=$r(n,o,1,r)-1;return u[f](i[f](o))}}function Mn(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ne(){var n=Se,e=Se,t=Zn,r,i,u,a=Z,o,f,c;function s(){var l=Math.min(n.length,e.length);return a!==Z&&(a=Zr(n[0],n[l-1])),o=l>2?ei:ni,f=c=null,g}function g(l){return l==null||isNaN(l=+l)?u:(f||(f=o(n.map(r),e,t)))(r(a(l)))}return g.invert=function(l){return a(i((c||(c=o(e,n.map(r),yn)))(l)))},g.domain=function(l){return arguments.length?(n=Array.from(l,Qr),s()):n.slice()},g.range=function(l){return arguments.length?(e=Array.from(l),s()):e.slice()},g.rangeRound=function(l){return e=Array.from(l),t=Vr,s()},g.clamp=function(l){return arguments.length?(a=l?!0:Z,s()):a!==Z},g.interpolate=function(l){return arguments.length?(t=l,s()):t},g.unknown=function(l){return arguments.length?(u=l,g):u},function(l,h){return r=l,i=h,s()}}function ft(){return ne()(Z,Z)}function ti(n){return Math.max(0,-an(Math.abs(n)))}function ri(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(an(e)/3)))*3-an(Math.abs(n)))}function ii(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,an(e)-an(n))+1}function ai(n,e,t,r){var i=Bn(n,e,t),u;switch(r=Ht(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(u=ri(i,a))&&(r.precision=u),jt(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(u=ii(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=u-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(u=ti(i))&&(r.precision=u-(r.type==="%")*2);break}}return Gn(r)}function ct(n){var e=n.domain;return n.ticks=function(t){var r=e();return jn(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return ai(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,u=r.length-1,a=r[i],o=r[u],f,c,s=10;for(o<a&&(c=a,a=o,o=c,c=i,i=u,u=c);s-- >0;){if(c=rt(a,o,t),c===f)return r[i]=a,r[u]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;f=c}return n},n}function st(){var n=ft();return n.copy=function(){return Mn(n,st())},tn.apply(n,arguments),ct(n)}function lt(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],u=n[r],a;return u<i&&(a=t,t=r,r=a,a=i,i=u,u=a),n[t]=e.floor(i),n[r]=e.ceil(u),n}function Ae(n){return Math.log(n)}function De(n){return Math.exp(n)}function ui(n){return-Math.log(-n)}function oi(n){return-Math.exp(-n)}function fi(n){return isFinite(n)?+("1e"+n):n<0?0:n}function ci(n){return n===10?fi:n===Math.E?Math.exp:function(e){return Math.pow(n,e)}}function si(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),function(e){return Math.log(e)/n})}function _e(n){return function(e){return-n(-e)}}function li(n){var e=n(Ae,De),t=e.domain,r=10,i,u;function a(){return i=si(r),u=ci(r),t()[0]<0?(i=_e(i),u=_e(u),n(ui,oi)):n(Ae,De),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=function(o){var f=t(),c=f[0],s=f[f.length-1],g;(g=s<c)&&(l=c,c=s,s=l);var l=i(c),h=i(s),d,m,v,p=o==null?10:+o,y=[];if(!(r%1)&&h-l<p){if(l=Math.floor(l),h=Math.ceil(h),c>0){for(;l<=h;++l)for(m=1,d=u(l);m<r;++m)if(v=d*m,!(v<c)){if(v>s)break;y.push(v)}}else for(;l<=h;++l)for(m=r-1,d=u(l);m>=1;--m)if(v=d*m,!(v<c)){if(v>s)break;y.push(v)}y.length*2<p&&(y=jn(c,s,p))}else y=jn(l,h,Math.min(h-l,p)).map(u);return g?y.reverse():y},e.tickFormat=function(o,f){if(f==null&&(f=r===10?".0e":","),typeof f!="function"&&(f=Gn(f)),o===1/0)return f;o==null&&(o=10);var c=Math.max(1,r*o/e.ticks().length);return function(s){var g=s/u(Math.round(i(s)));return g*r<r-.5&&(g*=r),g<=c?f(s):""}},e.nice=function(){return t(lt(t(),{floor:function(o){return u(Math.floor(i(o)))},ceil:function(o){return u(Math.ceil(i(o)))}}))},e}function gt(){var n=li(ne()).domain([1,10]);return n.copy=function(){return Mn(n,gt()).base(n.base())},tn.apply(n,arguments),n}function Ue(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function Fe(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function gi(n){var e=1,t=n(Ue(e),Fe(e));return t.constant=function(r){return arguments.length?n(Ue(e=+r),Fe(e)):e},ct(t)}function ht(){var n=gi(ne());return n.copy=function(){return Mn(n,ht()).constant(n.constant())},tn.apply(n,arguments)}var Un=new Date,Fn=new Date;function A(n,e,t,r){function i(u){return n(u=arguments.length===0?new Date:new Date(+u)),u}return i.floor=function(u){return n(u=new Date(+u)),u},i.ceil=function(u){return n(u=new Date(u-1)),e(u,1),n(u),u},i.round=function(u){var a=i(u),o=i.ceil(u);return u-a<o-u?a:o},i.offset=function(u,a){return e(u=new Date(+u),a==null?1:Math.floor(a)),u},i.range=function(u,a,o){var f=[],c;if(u=i.ceil(u),o=o==null?1:Math.floor(o),!(u<a)||!(o>0))return f;do f.push(c=new Date(+u)),e(u,o),n(u);while(c<u&&u<a);return f},i.filter=function(u){return A(function(a){if(a>=a)for(;n(a),!u(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!u(a););else for(;--o>=0;)for(;e(a,1),!u(a););})},t&&(i.count=function(u,a){return Un.setTime(+u),Fn.setTime(+a),n(Un),n(Fn),Math.floor(t(Un,Fn))},i.every=function(u){return u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?i.filter(r?function(a){return r(a)%u===0}:function(a){return i.count(0,a)%u===0}):i}),i}var pn=A(function(){},function(n,e){n.setTime(+n+e)},function(n,e){return e-n});pn.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?A(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):pn};pn.range;const H=1e3,F=H*60,j=F*60,X=j*24,ee=X*7,Ee=X*30,En=X*365;var L=A(function(n){n.setTime(n-n.getMilliseconds())},function(n,e){n.setTime(+n+e*H)},function(n,e){return(e-n)/H},function(n){return n.getUTCSeconds()});L.range;var te=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*H)},function(n,e){n.setTime(+n+e*F)},function(n,e){return(e-n)/F},function(n){return n.getMinutes()});te.range;var re=A(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*H-n.getMinutes()*F)},function(n,e){n.setTime(+n+e*j)},function(n,e){return(e-n)/j},function(n){return n.getHours()});re.range;var ie=A(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*F)/X,n=>n.getDate()-1);ie.range;function z(n){return A(function(e){e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*F)/ee})}var ae=z(0),hi=z(1),di=z(2),mi=z(3),xi=z(4),vi=z(5),yi=z(6);ae.range;hi.range;di.range;mi.range;xi.range;vi.range;yi.range;var ue=A(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,e){n.setMonth(n.getMonth()+e)},function(n,e){return e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});ue.range;var wn=A(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e)},function(n,e){return e.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});wn.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:A(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)})};wn.range;var oe=A(function(n){n.setUTCSeconds(0,0)},function(n,e){n.setTime(+n+e*F)},function(n,e){return(e-n)/F},function(n){return n.getUTCMinutes()});oe.range;var fe=A(function(n){n.setUTCMinutes(0,0,0)},function(n,e){n.setTime(+n+e*j)},function(n,e){return(e-n)/j},function(n){return n.getUTCHours()});fe.range;var ce=A(function(n){n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e-n)/X},function(n){return n.getUTCDate()-1});ce.range;function G(n){return A(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/ee})}var se=G(0),pi=G(1),bi=G(2),Mi=G(3),wi=G(4),ki=G(5),Ti=G(6);se.range;pi.range;bi.range;Mi.range;wi.range;ki.range;Ti.range;var le=A(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCMonth(n.getUTCMonth()+e)},function(n,e){return e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});le.range;var kn=A(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e)},function(n,e){return e.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});kn.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:A(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)})};kn.range;function dt(n,e,t,r,i,u){const a=[[L,1,H],[L,5,5*H],[L,15,15*H],[L,30,30*H],[u,1,F],[u,5,5*F],[u,15,15*F],[u,30,30*F],[i,1,j],[i,3,3*j],[i,6,6*j],[i,12,12*j],[r,1,X],[r,2,2*X],[t,1,ee],[e,1,Ee],[e,3,3*Ee],[n,1,En]];function o(c,s,g){const l=s<c;l&&([c,s]=[s,c]);const h=g&&typeof g.range=="function"?g:f(c,s,g),d=h?h.range(c,+s+1):[];return l?d.reverse():d}function f(c,s,g){const l=Math.abs(s-c)/g,h=Kn(([,,v])=>v).right(a,l);if(h===a.length)return n.every(Bn(c/En,s/En,g));if(h===0)return pn.every(Math.max(Bn(c,s,g),1));const[d,m]=a[l/a[h-1][2]<a[h][2]/l?h-1:h];return d.every(m)}return[o,f]}const[Ci,$i]=dt(kn,le,se,ce,fe,oe),[Si,Ai]=dt(wn,ue,ae,ie,re,te);var sn=N(function(){},function(n,e){n.setTime(+n+e)},function(n,e){return e-n});sn.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?N(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):sn};sn.range;var Ln=N(function(n){n.setTime(n-n.getMilliseconds())},function(n,e){n.setTime(+n+e*mn)},function(n,e){return(e-n)/mn},function(n){return n.getUTCSeconds()});Ln.range;var mt=N(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*mn)},function(n,e){n.setTime(+n+e*un)},function(n,e){return(e-n)/un},function(n){return n.getMinutes()});mt.range;var xt=N(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*mn-n.getMinutes()*un)},function(n,e){n.setTime(+n+e*xn)},function(n,e){return(e-n)/xn},function(n){return n.getHours()});xt.range;var vt=N(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,e){n.setMonth(n.getMonth()+e)},function(n,e){return e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});vt.range;var yt=N(function(n){n.setUTCSeconds(0,0)},function(n,e){n.setTime(+n+e*un)},function(n,e){return(e-n)/un},function(n){return n.getUTCMinutes()});yt.range;var pt=N(function(n){n.setUTCMinutes(0,0,0)},function(n,e){n.setTime(+n+e*xn)},function(n,e){return(e-n)/xn},function(n){return n.getUTCHours()});pt.range;var bt=N(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCMonth(n.getUTCMonth()+e)},function(n,e){return e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});bt.range;function Di(n){return new Date(n)}function _i(n){return n instanceof Date?+n:+new Date(+n)}function ge(n,e,t,r,i,u,a,o,f,c){var s=ft(),g=s.invert,l=s.domain,h=c(".%L"),d=c(":%S"),m=c("%I:%M"),v=c("%I %p"),p=c("%a %d"),y=c("%b %d"),k=c("%B"),b=c("%Y");function T(x){return(f(x)<x?h:o(x)<x?d:a(x)<x?m:u(x)<x?v:r(x)<x?i(x)<x?p:y:t(x)<x?k:b)(x)}return s.invert=function(x){return new Date(g(x))},s.domain=function(x){return arguments.length?l(Array.from(x,_i)):l().map(Di)},s.ticks=function(x){var C=l();return n(C[0],C[C.length-1],x??10)},s.tickFormat=function(x,C){return C==null?T:c(C)},s.nice=function(x){var C=l();return(!x||typeof x.range!="function")&&(x=e(C[0],C[C.length-1],x??10)),x?l(lt(C,x)):s},s.copy=function(){return Mn(s,ge(n,e,t,r,i,u,a,o,f,c))},s}function Ui(){return tn.apply(ge(Si,Ai,wn,ue,ae,ie,re,te,L,qe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Fi(){return tn.apply(ge(Ci,$i,kn,le,se,ce,fe,oe,L,Bt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ei(){}var Ni=Ei,Nn=It,Oi=Ni,Pi=Le,Yi=1/0,Ri=Nn&&1/Pi(new Nn([,-0]))[1]==Yi?function(n){return new Nn(n)}:Oi,Hi=Ri,ji=Wt,Bi=qt,Ii=Lt,Wi=Xt,qi=Hi,Li=Le,Xi=200;function zi(n,e,t){var r=-1,i=Bi,u=n.length,a=!0,o=[],f=o;if(t)a=!1,i=Ii;else if(u>=Xi){var c=e?null:qi(n);if(c)return Li(c);a=!1,i=Wi,f=new ji}else f=e?[]:o;n:for(;++r<u;){var s=n[r],g=e?e(s):s;if(s=t||s!==0?s:0,a&&g===g){for(var l=f.length;l--;)if(f[l]===g)continue n;e&&f.push(g),o.push(s)}else i(f,g,t)||(f!==o&&f.push(g),o.push(s))}return o}var Mt=zi,Gi=Mt;function Ki(n){return n&&n.length?Gi(n):[]}var Vi=Ki;const Ne=bn(Vi);var Ji=zt,Qi=Xe,Zi=1,na=2;function ea(n,e,t,r){var i=t.length,u=i,a=!r;if(n==null)return!u;for(n=Object(n);i--;){var o=t[i];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++i<u;){o=t[i];var f=o[0],c=n[f],s=o[1];if(a&&o[2]){if(c===void 0&&!(f in n))return!1}else{var g=new Ji;if(r)var l=r(c,s,f,n,e,g);if(!(l===void 0?Qi(s,c,Zi|na,r,g):l))return!1}}return!0}var ta=ea,ra=Gt;function ia(n){return n===n&&!ra(n)}var wt=ia,aa=wt,ua=ze;function oa(n){for(var e=ua(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,aa(i)]}return e}var fa=oa;function ca(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var kt=ca,sa=ta,la=fa,ga=kt;function ha(n){var e=la(n);return e.length==1&&e[0][2]?ga(e[0][0],e[0][1]):function(t){return t===n||sa(t,n,e)}}var da=ha,ma=Xe,xa=Kt,va=Vt,ya=Ge,pa=wt,ba=kt,Ma=Ke,wa=1,ka=2;function Ta(n,e){return ya(n)&&pa(e)?ba(Ma(n),e):function(t){var r=xa(t,n);return r===void 0&&r===e?va(t,n):ma(e,r,wa|ka)}}var Ca=Ta;function $a(n){return function(e){return e==null?void 0:e[n]}}var Sa=$a,Aa=Ve;function Da(n){return function(e){return Aa(e,n)}}var _a=Da,Ua=Sa,Fa=_a,Ea=Ge,Na=Ke;function Oa(n){return Ea(n)?Ua(Na(n)):Fa(n)}var Pa=Oa,Ya=da,Ra=Ca,Ha=Je,ja=Qe,Ba=Pa;function Ia(n){return typeof n=="function"?n:n==null?Ha:typeof n=="object"?ja(n)?Ra(n[0],n[1]):Ya(n):Ba(n)}var Tt=Ia,Wa=Tt,qa=Mt;function La(n,e){return n&&n.length?qa(n,Wa(e)):[]}var Xa=La;const za=bn(Xa);var Ga=Jt,Ka=ze;function Va(n,e){return n&&Ga(n,e,Ka)}var Ja=Va,Qa=Ze;function Za(n,e){return function(t,r){if(t==null)return t;if(!Qa(t))return n(t,r);for(var i=t.length,u=e?i:-1,a=Object(t);(e?u--:++u<i)&&r(a[u],u,a)!==!1;);return t}}var nu=Za,eu=Ja,tu=nu,ru=tu(eu),iu=ru,au=iu,uu=Ze;function ou(n,e){var t=-1,r=uu(n)?Array(n.length):[];return au(n,function(i,u,a){r[++t]=e(i,u,a)}),r}var fu=ou;function cu(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}var su=cu,Oe=Qt;function lu(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,u=Oe(n),a=e!==void 0,o=e===null,f=e===e,c=Oe(e);if(!o&&!c&&!u&&n>e||u&&a&&f&&!o&&!c||r&&a&&f||!t&&f||!i)return 1;if(!r&&!u&&!c&&n<e||c&&t&&i&&!r&&!u||o&&t&&i||!a&&i||!f)return-1}return 0}var gu=lu,hu=gu;function du(n,e,t){for(var r=-1,i=n.criteria,u=e.criteria,a=i.length,o=t.length;++r<a;){var f=hu(i[r],u[r]);if(f){if(r>=o)return f;var c=t[r];return f*(c=="desc"?-1:1)}}return n.index-e.index}var mu=du,On=Zt,xu=Ve,vu=Tt,yu=fu,pu=su,bu=nt,Mu=mu,wu=Je,ku=Qe;function Tu(n,e,t){e.length?e=On(e,function(u){return ku(u)?function(a){return xu(a,u.length===1?u[0]:u)}:u}):e=[wu];var r=-1;e=On(e,bu(vu));var i=yu(n,function(u,a,o){var f=On(e,function(c){return c(u)});return{criteria:f,index:++r,value:u}});return pu(i,function(u,a){return Mu(u,a,t)})}var Cu=Tu,$u=tr,Su=Cu,Au=nr,Pe=er,Du=Au(function(n,e){if(n==null)return[];var t=e.length;return t>1&&Pe(n,e[0],e[1])?e=[]:t>2&&Pe(e[0],e[1],e[2])&&(e=[e[0]]),Su(n,$u(e,1),[])}),_u=Du;const Uu=bn(_u);var Fu=ir,Eu=rr,Nu="[object Date]";function Ou(n){return Eu(n)&&Fu(n)==Nu}var Pu=Ou,Yu=Pu,Ru=nt,Ye=ar,Re=Ye&&Ye.isDate,Hu=Re?Ru(Re):Yu,ju=Hu;const Bu=bn(ju);function q(){return q=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q.apply(this,arguments)}var Q=[function(n){return n.setMilliseconds(0)},function(n){return n.setSeconds(0)},function(n){return n.setMinutes(0)},function(n){return n.setHours(0)},function(n){return n.setDate(1)},function(n){return n.setMonth(0)}],Iu={millisecond:[],second:Q.slice(0,1),minute:Q.slice(0,2),hour:Q.slice(0,3),day:Q.slice(0,4),month:Q.slice(0,5),year:Q.slice(0,6)},Wu=function(n){return function(e){return Iu[n].forEach(function(t){t(e)}),e}},Ct=function(n){var e=n.format,t=e===void 0?"native":e,r=n.precision,i=r===void 0?"millisecond":r,u=n.useUTC,a=u===void 0||u,o=Wu(i);return function(f){if(f===void 0)return f;if(t==="native"||f instanceof Date)return o(f);var c=a?br(t):Mr(t);return o(c(f))}},qu=function(n,e,t,r){var i,u,a,o,f=n.min,c=f===void 0?0:f,s=n.max,g=s===void 0?"auto":s,l=n.stacked,h=l!==void 0&&l,d=n.reverse,m=d!==void 0&&d,v=n.clamp,p=v!==void 0&&v,y=n.nice,k=y!==void 0&&y;c==="auto"?i=h===!0?(u=e.minStacked)!=null?u:0:e.min:i=c,g==="auto"?a=h===!0?(o=e.maxStacked)!=null?o:0:e.max:a=g;var b=st().rangeRound(r==="x"?[0,t]:[t,0]).domain(m?[a,i]:[i,a]).clamp(p);return k===!0?b.nice():typeof k=="number"&&b.nice(k),Lu(b,h)},Lu=function(n,e){e===void 0&&(e=!1);var t=n;return t.type="linear",t.stacked=e,t},Xu=function(n,e,t){var r=Ar().range([0,t]).domain(e.all);return r.type="point",r},zu=function(n,e,t,r){var i=n.round,u=i===void 0||i,a=Vn().range(r==="x"?[0,t]:[t,0]).domain(e.all).round(u);return Gu(a)},Gu=function(n){var e=n;return e.type="band",e},Ku=function(n,e,t){var r,i,u=n.format,a=u===void 0?"native":u,o=n.precision,f=o===void 0?"millisecond":o,c=n.min,s=c===void 0?"auto":c,g=n.max,l=g===void 0?"auto":g,h=n.useUTC,d=h===void 0||h,m=n.nice,v=m!==void 0&&m,p=Ct({format:a,precision:f,useUTC:d});r=s==="auto"?p(e.min):a!=="native"?p(s):s,i=l==="auto"?p(e.max):a!=="native"?p(l):l;var y=d?Fi():Ui();y.range([0,t]),r&&i&&y.domain([r,i]),v===!0?y.nice():typeof v!="object"&&typeof v!="number"||y.nice(v);var k=y;return k.type="time",k.useUTC=d,k},Vu=function(n,e,t,r){var i,u=n.base,a=u===void 0?10:u,o=n.min,f=o===void 0?"auto":o,c=n.max,s=c===void 0?"auto":c;if(e.all.some(function(m){return m===0}))throw new Error("a log scale domain must not include or cross zero");var g,l,h=!1;if(e.all.filter(function(m){return m!=null}).forEach(function(m){h||(i===void 0?i=Math.sign(m):Math.sign(m)!==i&&(h=!0))}),h)throw new Error("a log scale domain must be strictly-positive or strictly-negative");g=f==="auto"?e.min:f,l=s==="auto"?e.max:s;var d=gt().domain([g,l]).rangeRound(r==="x"?[0,t]:[t,0]).base(a).nice();return d.type="log",d},Ju=function(n,e,t,r){var i,u,a=n.constant,o=a===void 0?1:a,f=n.min,c=f===void 0?"auto":f,s=n.max,g=s===void 0?"auto":s,l=n.reverse,h=l!==void 0&&l;i=c==="auto"?e.min:c,u=g==="auto"?e.max:g;var d=ht().constant(o).rangeRound(r==="x"?[0,t]:[t,0]).nice();h===!0?d.domain([u,i]):d.domain([i,u]);var m=d;return m.type="symlog",m},Qu=function(n){return n==="x"?"y":"x"},Zu=function(n,e){return n===e},no=function(n,e){return n.getTime()===e.getTime()};function He(n,e,t,r){switch(n.type){case"linear":return qu(n,e,t,r);case"point":return Xu(n,e,t);case"band":return zu(n,e,t,r);case"time":return Ku(n,e,t);case"log":return Vu(n,e,t,r);case"symlog":return Ju(n,e,t,r);default:throw new Error("invalid scale spec")}}var je=function(n,e,t){var r;if("stacked"in t&&t.stacked){var i=n.data[e==="x"?"xStacked":"yStacked"];return i==null?null:t(i)}return(r=t(n.data[e]))!=null?r:null},vo=function(n,e,t,r,i){var u=n.map(function(s){return function(g){return q({},g,{data:g.data.map(function(l){return{data:q({},l)}})})}(s)}),a=eo(u,e,t);"stacked"in e&&e.stacked===!0&&to(a,u),"stacked"in t&&t.stacked===!0&&ro(a,u);var o=He(e,a.x,r,"x"),f=He(t,a.y,i,"y"),c=u.map(function(s){return q({},s,{data:s.data.map(function(g){return q({},g,{position:{x:je(g,"x",o),y:je(g,"y",f)}})})})});return q({},a,{series:c,xScale:o,yScale:f})},eo=function(n,e,t){return{x:Be(n,"x",e),y:Be(n,"y",t)}},Be=function(n,e,t,r){var i={},u=i.getValue,a=u===void 0?function(d){return d.data[e]}:u,o=i.setValue,f=o===void 0?function(d,m){d.data[e]=m}:o;if(t.type==="linear")n.forEach(function(d){d.data.forEach(function(m){var v=a(m);v&&f(m,parseFloat(String(v)))})});else if(t.type==="time"&&t.format!=="native"){var c=Ct(t);n.forEach(function(d){d.data.forEach(function(m){var v=a(m);v&&f(m,c(v))})})}var s=[];switch(n.forEach(function(d){d.data.forEach(function(m){s.push(a(m))})}),t.type){case"linear":var g=Uu(Ne(s).filter(function(d){return d!==null}),function(d){return d});return{all:g,min:Math.min.apply(Math,g),max:Math.max.apply(Math,g)};case"time":var l=za(s,function(d){return d.getTime()}).slice(0).sort(function(d,m){return m.getTime()-d.getTime()}).reverse();return{all:l,min:l[0],max:Pn(l)};default:var h=Ne(s);return{all:h,min:h[0],max:Pn(h)}}},$t=function(n,e,t){var r=Qu(n),i=[];e[r].all.forEach(function(u){var a=Bu(u)?no:Zu,o=[];t.forEach(function(f){var c=f.data.find(function(h){return a(h.data[r],u)}),s=null,g=null;if(c!==void 0){if((s=c.data[n])!==null){var l=Pn(o);l===void 0?g=s:l!==null&&(g=l+s)}c.data[n==="x"?"xStacked":"yStacked"]=g}o.push(g),g!==null&&i.push(g)})}),e[n].minStacked=Math.min.apply(Math,i),e[n].maxStacked=Math.max.apply(Math,i)},to=function(n,e){return $t("x",n,e)},ro=function(n,e){return $t("y",n,e)},St=function(n){var e=n.bandwidth();if(e===0)return n;var t=e/2;return n.round()&&(t=Math.round(t)),function(r){var i;return((i=n(r))!=null?i:0)+t}},At={millisecond:[sn,sn],second:[Ln,Ln],minute:[mt,yt],hour:[xt,pt],day:[N(function(n){return n.setHours(0,0,0,0)},function(n,e){return n.setDate(n.getDate()+e)},function(n,e){return(e.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)}),N(function(n){return n.setUTCHours(0,0,0,0)},function(n,e){return n.setUTCDate(n.getUTCDate()+e)},function(n,e){return(e.getTime()-n.getTime())/864e5},function(n){return Math.floor(n.getTime()/864e5)})],week:[ve,ye],sunday:[ve,ye],monday:[yr,pr],tuesday:[xr,vr],wednesday:[dr,mr],thursday:[gr,hr],friday:[sr,lr],saturday:[fr,cr],month:[vt,bt],year:[ur,or]},io=Object.keys(At),ao=new RegExp("^every\\s*(\\d+)?\\s*("+io.join("|")+")s?$","i"),Dt=function(n,e){if(Array.isArray(e))return e;if(typeof e=="string"&&"useUTC"in n){var t=e.match(ao);if(t){var r=t[1],i=t[2],u=At[i][n.useUTC?1:0];if(i==="day"){var a,o,f=n.domain(),c=f[0],s=f[1],g=new Date(s);return g.setDate(g.getDate()+1),(a=(o=u.every(Number(r??1)))==null?void 0:o.range(c,g))!=null?a:[]}if(r===void 0)return n.ticks(u);var l=u.every(Number(r));if(l)return n.ticks(l)}throw new Error("Invalid tickValues: "+e)}if("ticks"in n){if(e===void 0)return n.ticks();if(typeof(h=e)=="number"&&isFinite(h)&&Math.floor(h)===h)return n.ticks(e)}var h;return n.domain()};function E(){return E=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E.apply(this,arguments)}var _t=function(n){var e,t=n.axis,r=n.scale,i=n.ticksPosition,u=n.tickValues,a=n.tickSize,o=n.tickPadding,f=n.tickRotation,c=n.truncateTickAt,s=n.engine,g=s===void 0?"svg":s,l=Dt(r,u),h=Rt[g],d="bandwidth"in r?St(r):r,m={lineX:0,lineY:0},v={textX:0,textY:0},p=typeof document=="object"&&document.dir==="rtl",y=h.align.center,k=h.baseline.center;return t==="x"?(e=function(b){var T;return{x:(T=d(b))!=null?T:0,y:0}},m.lineY=a*(i==="after"?1:-1),v.textY=(a+o)*(i==="after"?1:-1),k=i==="after"?h.baseline.top:h.baseline.bottom,f===0?y=h.align.center:i==="after"&&f<0||i==="before"&&f>0?(y=h.align[p?"left":"right"],k=h.baseline.center):(i==="after"&&f>0||i==="before"&&f<0)&&(y=h.align[p?"right":"left"],k=h.baseline.center)):(e=function(b){var T;return{x:0,y:(T=d(b))!=null?T:0}},m.lineX=a*(i==="after"?1:-1),v.textX=(a+o)*(i==="after"?1:-1),y=i==="after"?h.align.left:h.align.right),{ticks:l.map(function(b){var T=typeof b=="string"?function(x){var C=String(x).length;return c&&c>0&&C>c?""+String(x).slice(0,c).concat("..."):""+x}(b):b;return E({key:b instanceof Date?""+b.valueOf():""+b,value:T},e(b),m,v)}),textAlign:y,textBaseline:k}},Ut=function(n,e){if(n===void 0||typeof n=="function")return n;if(e.type==="time"){var t=qe(n);return function(r){return t(r instanceof Date?r:new Date(r))}}return Gn(n)},Xn=function(n){var e,t=n.width,r=n.height,i=n.scale,u=n.axis,a=n.values,o=(e=a,(Array.isArray(e)?a:void 0)||Dt(i,a)),f="bandwidth"in i?St(i):i,c=u==="x"?o.map(function(s){var g,l;return{key:s instanceof Date?""+s.valueOf():""+s,x1:(g=f(s))!=null?g:0,x2:(l=f(s))!=null?l:0,y1:0,y2:r}}):o.map(function(s){var g,l;return{key:s instanceof Date?""+s.valueOf():""+s,x1:0,x2:t,y1:(g=f(s))!=null?g:0,y2:(l=f(s))!=null?l:0}});return c},uo=D.memo(function(n){var e,t=n.value,r=n.format,i=n.lineX,u=n.lineY,a=n.onClick,o=n.textBaseline,f=n.textAnchor,c=n.animatedProps,s=zn(),g=s.axis.ticks.line,l=s.axis.ticks.text,h=(e=r==null?void 0:r(t))!=null?e:t,d=D.useMemo(function(){var m={opacity:c.opacity};return a?{style:E({},m,{cursor:"pointer"}),onClick:function(v){return a(v,h)}}:{style:m}},[c.opacity,a,h]);return S.jsxs(nn.g,E({transform:c.transform},d,{children:[S.jsx("line",{x1:0,x2:i,y1:0,y2:u,style:g}),l.outlineWidth>0&&S.jsx(nn.text,{dominantBaseline:o,textAnchor:f,transform:c.textTransform,style:l,strokeWidth:2*l.outlineWidth,stroke:l.outlineColor,strokeLinejoin:"round",children:""+h}),S.jsx(nn.text,{dominantBaseline:o,textAnchor:f,transform:c.textTransform,style:l,children:""+h})]}))}),oo=function(n){var e=n.axis,t=n.scale,r=n.x,i=r===void 0?0:r,u=n.y,a=u===void 0?0:u,o=n.length,f=n.ticksPosition,c=n.tickValues,s=n.tickSize,g=s===void 0?5:s,l=n.tickPadding,h=l===void 0?5:l,d=n.tickRotation,m=d===void 0?0:d,v=n.format,p=n.renderTick,y=p===void 0?uo:p,k=n.truncateTickAt,b=n.legend,T=n.legendPosition,x=T===void 0?"end":T,C=n.legendOffset,$=C===void 0?0:C,K=n.onClick,Tn=n.ariaHidden,gn=zn(),W=gn.axis.legend.text,O=D.useMemo(function(){return Ut(v,t)},[v,t]),rn=_t({axis:e,scale:t,ticksPosition:f,tickValues:c,tickSize:g,tickPadding:h,tickRotation:m,truncateTickAt:k}),V=rn.ticks,J=rn.textAlign,hn=rn.textBaseline,P=null;if(b!==void 0){var w,B=0,I=0,Cn=0;e==="y"?(Cn=-90,B=$,x==="start"?(w="start",I=o):x==="middle"?(w="middle",I=o/2):x==="end"&&(w="end")):(I=$,x==="start"?w="start":x==="middle"?(w="middle",B=o/2):x==="end"&&(w="end",B=o)),P=S.jsxs(S.Fragment,{children:[W.outlineWidth>0&&S.jsx("text",{transform:"translate("+B+", "+I+") rotate("+Cn+")",textAnchor:w,style:E({dominantBaseline:"central"},W),strokeWidth:2*W.outlineWidth,stroke:W.outlineColor,strokeLinejoin:"round",children:b}),S.jsx("text",{transform:"translate("+B+", "+I+") rotate("+Cn+")",textAnchor:w,style:E({dominantBaseline:"central"},W),children:b})]})}var he=We(),de=he.animate,me=he.config,$n=wr({transform:"translate("+i+","+a+")",lineX2:e==="x"?o:0,lineY2:e==="x"?0:o,config:me,immediate:!de}),Sn=D.useCallback(function(_){return{opacity:1,transform:"translate("+_.x+","+_.y+")",textTransform:"translate("+_.textX+","+_.textY+") rotate("+m+")"}},[m]),Et=D.useCallback(function(_){return{opacity:0,transform:"translate("+_.x+","+_.y+")",textTransform:"translate("+_.textX+","+_.textY+") rotate("+m+")"}},[m]),Nt=et(V,{keys:function(_){return _.key},initial:Sn,from:Et,enter:Sn,update:Sn,leave:{opacity:0},config:me,immediate:!de});return S.jsxs(nn.g,{transform:$n.transform,"aria-hidden":Tn,children:[Nt(function(_,Ot,go,Pt){return D.createElement(y,E({tickIndex:Pt,format:O,rotate:m,textBaseline:hn,textAnchor:J,truncateTickAt:k,animatedProps:_},Ot,K?{onClick:K}:{}))}),S.jsx(nn.line,{style:gn.axis.domain.line,x1:0,x2:$n.lineX2,y1:0,y2:$n.lineY2}),P]})},fo=D.memo(oo),co={ticksPosition:M.oneOf(["before","after"]),tickValues:M.oneOfType([M.number,M.arrayOf(M.oneOfType([M.number,M.string,M.instanceOf(Date)])),M.string]),rotateOnTickLength:M.shape({angle:M.number,length:M.number}),tickSize:M.number,tickPadding:M.number,tickRotation:M.number,format:M.oneOfType([M.func,M.string]),renderTick:M.func,legend:M.node,legendPosition:M.oneOf(["start","middle","end"]),legendOffset:M.number,ariaHidden:M.bool},yo=M.shape(co),Ft=["top","right","bottom","left"],po=D.memo(function(n){var e=n.xScale,t=n.yScale,r=n.width,i=n.height,u={top:n.top,right:n.right,bottom:n.bottom,left:n.left};return S.jsx(S.Fragment,{children:Ft.map(function(a){var o=u[a];if(!o)return null;var f=a==="top"||a==="bottom";return S.jsx(fo,E({},o,{axis:f?"x":"y",x:a==="right"?r:0,y:a==="bottom"?i:0,scale:f?e:t,length:f?r:i,ticksPosition:a==="top"||a==="left"?"before":"after",truncateTickAt:o.truncateTickAt}),a)})})}),so=D.memo(function(n){var e=n.animatedProps,t=zn();return S.jsx(nn.line,E({},e,t.grid.line))}),Ie=D.memo(function(n){var e=n.lines,t=We(),r=t.animate,i=t.config,u=et(e,{keys:function(a){return a.key},initial:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},from:function(a){return{opacity:0,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},enter:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},update:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},leave:{opacity:0},config:i,immediate:!r});return S.jsx("g",{children:u(function(a,o){return D.createElement(so,E({},o,{key:o.key,animatedProps:a}))})})}),bo=D.memo(function(n){var e=n.width,t=n.height,r=n.xScale,i=n.yScale,u=n.xValues,a=n.yValues,o=D.useMemo(function(){return!!r&&Xn({width:e,height:t,scale:r,axis:"x",values:u})},[r,u,e,t]),f=D.useMemo(function(){return!!i&&Xn({width:e,height:t,scale:i,axis:"y",values:a})},[t,e,i,a]);return S.jsxs(S.Fragment,{children:[o&&S.jsx(Ie,{lines:o}),f&&S.jsx(Ie,{lines:f})]})}),lo=function(n,e){var t,r=e.axis,i=e.scale,u=e.x,a=u===void 0?0:u,o=e.y,f=o===void 0?0:o,c=e.length,s=e.ticksPosition,g=e.tickValues,l=e.tickSize,h=l===void 0?5:l,d=e.tickPadding,m=d===void 0?5:d,v=e.tickRotation,p=v===void 0?0:v,y=e.format,k=e.legend,b=e.legendPosition,T=b===void 0?"end":b,x=e.legendOffset,C=x===void 0?0:x,$=e.theme,K=_t({axis:r,scale:i,ticksPosition:s,tickValues:g,tickSize:h,tickPadding:m,tickRotation:p,engine:"canvas"}),Tn=K.ticks,gn=K.textAlign,W=K.textBaseline;n.save(),n.translate(a,f),n.textAlign=gn,n.textBaseline=W;var O=$.axis.ticks.text;n.font=(O.fontWeight?O.fontWeight+" ":"")+O.fontSize+"px "+O.fontFamily,((t=$.axis.domain.line.strokeWidth)!=null?t:0)>0&&(n.lineWidth=Number($.axis.domain.line.strokeWidth),n.lineCap="square",$.axis.domain.line.stroke&&(n.strokeStyle=$.axis.domain.line.stroke),n.beginPath(),n.moveTo(0,0),n.lineTo(r==="x"?c:0,r==="x"?0:c),n.stroke());var rn=typeof y=="function"?y:function(w){return""+w};if(Tn.forEach(function(w){var B;((B=$.axis.ticks.line.strokeWidth)!=null?B:0)>0&&(n.lineWidth=Number($.axis.ticks.line.strokeWidth),n.lineCap="square",$.axis.ticks.line.stroke&&(n.strokeStyle=$.axis.ticks.line.stroke),n.beginPath(),n.moveTo(w.x,w.y),n.lineTo(w.x+w.lineX,w.y+w.lineY),n.stroke());var I=rn(w.value);n.save(),n.translate(w.x+w.textX,w.y+w.textY),n.rotate(xe(p)),O.outlineWidth>0&&(n.strokeStyle=O.outlineColor,n.lineWidth=2*O.outlineWidth,n.lineJoin="round",n.strokeText(""+I,0,0)),$.axis.ticks.text.fill&&(n.fillStyle=O.fill),n.fillText(""+I,0,0),n.restore()}),k!==void 0){var V=0,J=0,hn=0,P="center";r==="y"?(hn=-90,V=C,T==="start"?(P="start",J=c):T==="middle"?(P="center",J=c/2):T==="end"&&(P="end")):(J=C,T==="start"?P="start":T==="middle"?(P="center",V=c/2):T==="end"&&(P="end",V=c)),n.translate(V,J),n.rotate(xe(hn)),n.font=($.axis.legend.text.fontWeight?$.axis.legend.text.fontWeight+" ":"")+$.axis.legend.text.fontSize+"px "+$.axis.legend.text.fontFamily,$.axis.legend.text.fill&&(n.fillStyle=$.axis.legend.text.fill),n.textAlign=P,n.textBaseline="middle",n.fillText(k,0,0)}n.restore()},Mo=function(n,e){var t=e.xScale,r=e.yScale,i=e.width,u=e.height,a=e.top,o=e.right,f=e.bottom,c=e.left,s=e.theme,g={top:a,right:o,bottom:f,left:c};Ft.forEach(function(l){var h=g[l];if(!h)return null;var d=l==="top"||l==="bottom",m=l==="top"||l==="left"?"before":"after",v=d?t:r,p=Ut(h.format,v);lo(n,E({},h,{axis:d?"x":"y",x:l==="right"?i:0,y:l==="bottom"?u:0,scale:v,format:p,length:d?i:u,ticksPosition:m,theme:s}))})},wo=function(n,e){var t=e.width,r=e.height,i=e.scale,u=e.axis,a=e.values;Xn({width:t,height:r,scale:i,axis:u,values:a}).forEach(function(o){n.beginPath(),n.moveTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.stroke()})};export{wo as D,za as V,po as X,iu as _,Uu as a,Tt as b,He as c,vo as d,Mo as j,st as l,yo as w,bo as z};
