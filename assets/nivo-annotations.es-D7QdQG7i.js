import{g as M,r as p,j as u}from"./index-CK_uOnZG.js";import{_ as I,s as L,v as D,w as R,a as x,u as W}from"./isEqual-CcuYNxJE.js";import{_ as q,b as A}from"./nivo-axes.es-MTkSF8Is.js";import{y as T}from"./omit-Dp3k3iLg.js";import{E as b,$ as J,Z as j,q as N,r as X,s as $,t as G}from"./nivo-legends.es-CkyR2X4n.js";var Y=q;function Z(t,e){var o=[];return Y(t,function(i,n,a){e(i,n,a)&&o.push(i)}),o}var B=Z,V=I,H=B,K=A,Q=L;function U(t,e){var o=Q(t)?V:H;return o(t,K(e))}var tt=U;const nt=M(tt);var it=R,et=D,ot="[object Number]";function at(t){return typeof t=="number"||et(t)&&it(t)==ot}var rt=at;const C=M(rt);function f(){return f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},f.apply(this,arguments)}var z={dotSize:4,noteWidth:120,noteTextOffset:8},st=function(t){var e=typeof t;return p.isValidElement(t)||e==="string"||e==="function"||e==="object"},ut=function(t){var e=typeof t;return e==="string"||e==="function"},g=function(t){return t.type==="circle"},P=function(t){return t.type==="dot"},k=function(t){return t.type==="rect"},lt=function(t){var e=t.data,o=t.annotations,i=t.getPosition,n=t.getDimensions;return o.reduce(function(a,r){var s=r.offset||0;return[].concat(a,nt(e,r.match).map(function(l){var h=i(l),c=n(l);return(g(r)||k(r))&&(c.size=c.size+2*s,c.width=c.width+2*s,c.height=c.height+2*s),f({},T(r,["match","offset"]),h,c,{size:r.size||c.size,datum:l})}))},[])},ht=function(t,e,o,i){var n=Math.atan2(i-e,o-t);return $(G(n))},_=function(t){var e,o,i=t.x,n=t.y,a=t.noteX,r=t.noteY,s=t.noteWidth,l=s===void 0?z.noteWidth:s,h=t.noteTextOffset,c=h===void 0?z.noteTextOffset:h;if(C(a))e=i+a;else{if(a.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");e=a.abs}if(C(r))o=n+r;else{if(r.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");o=r.abs}var d=i,y=n,v=ht(i,n,e,o);if(g(t)){var E=N(X(v),t.size/2);d+=E.x,y+=E.y}if(k(t)){var m=Math.round((v+90)/45)%8;m===0&&(y-=t.height/2),m===1&&(d+=t.width/2,y-=t.height/2),m===2&&(d+=t.width/2),m===3&&(d+=t.width/2,y+=t.height/2),m===4&&(y+=t.height/2),m===5&&(d-=t.width/2,y+=t.height/2),m===6&&(d-=t.width/2),m===7&&(d-=t.width/2,y-=t.height/2)}var O=e,w=e;return(v+90)%360>180?(O-=l,w-=l):w+=l,{points:[[d,y],[e,o],[w,o]],text:[O,o-c],angle:v+90}},vt=function(t){var e=t.data,o=t.annotations,i=t.getPosition,n=t.getDimensions;return p.useMemo(function(){return lt({data:e,annotations:o,getPosition:i,getDimensions:n})},[e,o,i,n])},Wt=function(t){var e=t.annotations;return p.useMemo(function(){return e.map(function(o){return f({},o,{computed:_(f({},o))})})},[e])},dt=function(t){return p.useMemo(function(){return _(t)},[t])},ct=function(t){var e=t.datum,o=t.x,i=t.y,n=t.note,a=b(),r=j(),s=r.animate,l=r.config,h=W({x:o,y:i,config:l,immediate:!s});return typeof n=="function"?p.createElement(n,{x:o,y:i,datum:e}):u.jsxs(u.Fragment,{children:[a.annotations.text.outlineWidth>0&&u.jsx(x.text,{x:h.x,y:h.y,style:f({},a.annotations.text,{strokeLinejoin:"round",strokeWidth:2*a.annotations.text.outlineWidth,stroke:a.annotations.text.outlineColor}),children:n}),u.jsx(x.text,{x:h.x,y:h.y,style:T(a.annotations.text,["outlineWidth","outlineColor"]),children:n})]})},S=function(t){var e=t.points,o=t.isOutline,i=o!==void 0&&o,n=b(),a=p.useMemo(function(){var l=e[0];return e.slice(1).reduce(function(h,c){return h+" L"+c[0]+","+c[1]},"M"+l[0]+","+l[1])},[e]),r=J(a);if(i&&n.annotations.link.outlineWidth<=0)return null;var s=f({},n.annotations.link);return i&&(s.strokeLinecap="square",s.strokeWidth=n.annotations.link.strokeWidth+2*n.annotations.link.outlineWidth,s.stroke=n.annotations.link.outlineColor,s.opacity=n.annotations.link.outlineOpacity),u.jsx(x.path,{fill:"none",d:r,style:s})},ft=function(t){var e=t.x,o=t.y,i=t.size,n=b(),a=j(),r=a.animate,s=a.config,l=W({x:e,y:o,radius:i/2,config:s,immediate:!r});return u.jsxs(u.Fragment,{children:[n.annotations.outline.outlineWidth>0&&u.jsx(x.circle,{cx:l.x,cy:l.y,r:l.radius,style:f({},n.annotations.outline,{fill:"none",strokeWidth:n.annotations.outline.strokeWidth+2*n.annotations.outline.outlineWidth,stroke:n.annotations.outline.outlineColor,opacity:n.annotations.outline.outlineOpacity})}),u.jsx(x.circle,{cx:l.x,cy:l.y,r:l.radius,style:n.annotations.outline})]})},xt=function(t){var e=t.x,o=t.y,i=t.size,n=i===void 0?z.dotSize:i,a=b(),r=j(),s=r.animate,l=r.config,h=W({x:e,y:o,radius:n/2,config:l,immediate:!s});return u.jsxs(u.Fragment,{children:[a.annotations.outline.outlineWidth>0&&u.jsx(x.circle,{cx:h.x,cy:h.y,r:h.radius,style:f({},a.annotations.outline,{fill:"none",strokeWidth:2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),u.jsx(x.circle,{cx:h.x,cy:h.y,r:h.radius,style:a.annotations.symbol})]})},yt=function(t){var e=t.x,o=t.y,i=t.width,n=t.height,a=t.borderRadius,r=a===void 0?6:a,s=b(),l=j(),h=l.animate,c=l.config,d=W({x:e-i/2,y:o-n/2,width:i,height:n,config:c,immediate:!h});return u.jsxs(u.Fragment,{children:[s.annotations.outline.outlineWidth>0&&u.jsx(x.rect,{x:d.x,y:d.y,rx:r,ry:r,width:d.width,height:d.height,style:f({},s.annotations.outline,{fill:"none",strokeWidth:s.annotations.outline.strokeWidth+2*s.annotations.outline.outlineWidth,stroke:s.annotations.outline.outlineColor,opacity:s.annotations.outline.outlineOpacity})}),u.jsx(x.rect,{x:d.x,y:d.y,rx:r,ry:r,width:d.width,height:d.height,style:s.annotations.outline})]})},jt=function(t){var e=t.datum,o=t.x,i=t.y,n=t.note,a=dt(t);if(!st(n))throw new Error("note should be a valid react element");return u.jsxs(u.Fragment,{children:[u.jsx(S,{points:a.points,isOutline:!0}),g(t)&&u.jsx(ft,{x:o,y:i,size:t.size}),P(t)&&u.jsx(xt,{x:o,y:i,size:t.size}),k(t)&&u.jsx(yt,{x:o,y:i,width:t.width,height:t.height,borderRadius:t.borderRadius}),u.jsx(S,{points:a.points}),u.jsx(ct,{datum:e,x:a.text[0],y:a.text[1],note:n})]})},F=function(t,e){e.forEach(function(o,i){var n=o[0],a=o[1];i===0?t.moveTo(n,a):t.lineTo(n,a)})},wt=function(t,e){var o=e.annotations,i=e.theme;o.length!==0&&(t.save(),o.forEach(function(n){if(!ut(n.note))throw new Error("note is invalid for canvas implementation");i.annotations.link.outlineWidth>0&&(t.lineCap="square",t.strokeStyle=i.annotations.link.outlineColor,t.lineWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,t.beginPath(),F(t,n.computed.points),t.stroke(),t.lineCap="butt"),g(n)&&i.annotations.outline.outlineWidth>0&&(t.strokeStyle=i.annotations.outline.outlineColor,t.lineWidth=i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),P(n)&&i.annotations.symbol.outlineWidth>0&&(t.strokeStyle=i.annotations.symbol.outlineColor,t.lineWidth=2*i.annotations.symbol.outlineWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),k(n)&&i.annotations.outline.outlineWidth>0&&(t.strokeStyle=i.annotations.outline.outlineColor,t.lineWidth=i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),t.stroke()),t.strokeStyle=i.annotations.link.stroke,t.lineWidth=i.annotations.link.strokeWidth,t.beginPath(),F(t,n.computed.points),t.stroke(),g(n)&&(t.strokeStyle=i.annotations.outline.stroke,t.lineWidth=i.annotations.outline.strokeWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),P(n)&&(t.fillStyle=i.annotations.symbol.fill,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.fill()),k(n)&&(t.strokeStyle=i.annotations.outline.stroke,t.lineWidth=i.annotations.outline.strokeWidth,t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),t.stroke()),typeof n.note=="function"?n.note(t,{datum:n.datum,x:n.computed.text[0],y:n.computed.text[1],theme:i}):(t.font=i.annotations.text.fontSize+"px "+i.annotations.text.fontFamily,t.textAlign="left",t.textBaseline="alphabetic",t.fillStyle=i.annotations.text.fill,t.strokeStyle=i.annotations.text.outlineColor,t.lineWidth=2*i.annotations.text.outlineWidth,i.annotations.text.outlineWidth>0&&(t.lineJoin="round",t.strokeText(n.note,n.computed.text[0],n.computed.text[1]),t.lineJoin="miter"),t.fillText(n.note,n.computed.text[0],n.computed.text[1]))}),t.restore())};export{wt as J,jt as R,vt as S,C as X,Wt as j};
