import{j as a,r as i,B as Xe,n as Je,T as ze}from"./index-CDibt_54.js";import{J as Ge,i as He,B as Ye,f as Ue,e as Ze,_ as qe,w as _e,D as Be,G as Qe,p as Ke,Z as eo,k as Fe,E as oo,h as to,F as no,A as io}from"./nivo-legends.es-B-Agsqpi.js";import{z as ro,X as ao,d as so,l as lo,D as Te,j as uo}from"./nivo-axes.es-BDXdT2cr.js";import{R as co,X as ho,S as fo,J as mo}from"./nivo-annotations.es-C449e2JW.js";import{a as vo,b as go,Y as xo,F as po,W as yo}from"./isEqual-DvdVIXZq.js";import{O as bo,x as Mo,P as So,j as ko}from"./nivo-voronoi.es-Bhyc1rHU.js";import"./omit-DPlh8iDs.js";function F(){return F=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},F.apply(this,arguments)}function Oe(e,o){if(e==null)return{};var t,n,d={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],o.indexOf(t)>=0||(d[t]=e[t]);return d}var wo=function(e){if(typeof e=="function")return e;if(ho(e))return function(){return e};if(function(t){return xo(t)}(e)){if(!po(e.key))throw new Error("symbolSize is invalid, key should be a string pointing to the property to use to determine node size");if(!Array.isArray(e.values)||e.values.length!==2)throw new Error("symbolSize is invalid, values spec should be an array containing two values, min and max");if(!Array.isArray(e.sizes)||e.sizes.length!==2)throw new Error("symbolSize is invalid, sizes spec should be an array containing two values, min and max");var o=lo().domain([e.values[0],e.values[1]]).range([e.sizes[0],e.sizes[1]]);return function(t){return o(yo(t,e.key))}}throw new Error("nodeSize is invalid, it should be either a function, a number or an object")},Pe=function(e){var o,t=e.data,n=e.xScaleSpec,d=e.xFormat,s=e.yScaleSpec,p=e.yFormat,g=e.width,f=e.height,j=e.nodeId,I=e.nodeSize,M=e.colors,u=i.useMemo(function(){return so(t,n,s,g,f)},[t,n,s,g,f]),m=u.series,B=u.xScale,C=u.yScale,T=Be(d),x=Be(p),y=Qe(j),O=i.useMemo(function(){return function(l){var K=l.series,oe=l.formatX,te=l.formatY,ne=l.getNodeId,N=[];return K.forEach(function(ie){ie.data.forEach(function(W,re){var J={index:N.length,serieIndex:re,serieId:ie.id,x:W.position.x,xValue:W.data.x,formattedX:oe(W.data.x),y:W.position.y,yValue:W.data.y,formattedY:te(W.data.y),data:W.data};N.push(F({},J,{id:ne(J)}))})}),N}({series:m,formatX:T,formatY:x,getNodeId:y})},[m,T,x,y]),A=i.useMemo(function(){return wo(o)},[o=I]),v=Ke(M,"serieId");return{xScale:B,yScale:C,nodes:i.useMemo(function(){return O.map(function(l){return F({},l,{size:A(l),color:v({serieId:l.serieId})})})},[O,A,v]),legendData:i.useMemo(function(){return m.map(function(l){return{id:l.id,label:l.id,color:v({serieId:l.id})}})},[m,v])}},De=function(e,o){return fo({data:e,annotations:o,getPosition:function(t){return{x:t.x,y:t.y}},getDimensions:function(t){return{size:t.size,width:t.size,height:t.size}}})},Co=function(e){return e/2},Ve={xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:0,max:"auto"},enableGridX:!0,enableGridY:!0,axisBottom:{},axisLeft:{},nodeId:function(e){return e.serieId+"."+e.index},nodeSize:9,nodeComponent:function(e){var o=e.node,t=e.style,n=e.blendMode,d=e.isInteractive,s=e.onMouseEnter,p=e.onMouseMove,g=e.onMouseLeave,f=e.onClick,j=i.useCallback(function(m){return s==null?void 0:s(o,m)},[o,s]),I=i.useCallback(function(m){return p==null?void 0:p(o,m)},[o,p]),M=i.useCallback(function(m){return g==null?void 0:g(o,m)},[o,g]),u=i.useCallback(function(m){return f==null?void 0:f(o,m)},[o,f]);return a.jsx(vo.circle,{cx:t.x,cy:t.y,r:t.size.to(Co),fill:t.color,style:{mixBlendMode:n},onMouseEnter:d?j:void 0,onMouseMove:d?I:void 0,onMouseLeave:d?M:void 0,onClick:d?u:void 0})},colors:{scheme:"nivo"},isInteractive:!0,debugMesh:!1,tooltip:function(e){var o=e.node;return a.jsx(_e,{id:o.serieId,value:"x: "+o.formattedX+", y: "+o.formattedY,enableChip:!0,color:o.color})},markers:[],legends:[],annotations:[]},c=F({},Ve,{blendMode:"normal",layers:["grid","axes","nodes","markers","mesh","legends","annotations"],role:"img",useMesh:!0,animate:!0,motionConfig:"default"}),w=F({},Ve,{layers:["grid","axes","nodes","mesh","legends","annotations"],pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,renderNode:function(e,o){e.beginPath(),e.arc(o.x,o.y,o.size/2,0,2*Math.PI),e.fillStyle=o.color,e.fill()}}),jo=function(e){var o=e.nodes,t=e.annotations,n=De(o,t);return a.jsx(a.Fragment,{children:n.map(function(d,s){return a.jsx(co,F({},d),s)})})},Io=function(e){return e.id},Le=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},Eo=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},zo=function(e){var o=e.nodes,t=e.nodeComponent,n=e.isInteractive,d=e.onMouseEnter,s=e.onMouseMove,p=e.onMouseLeave,g=e.onClick,f=e.tooltip,j=e.blendMode,I=eo(),M=I.animate,u=I.config,m=go(o,{keys:Io,from:Le,enter:Le,update:Le,leave:Eo,config:u,immediate:!M}),B=Fe(),C=B.showTooltipFromEvent,T=B.hideTooltip,x=i.useCallback(function(v,l){C(i.createElement(f,{node:v}),l),d==null||d(v,l)},[f,C,d]),y=i.useCallback(function(v,l){C(i.createElement(f,{node:v}),l),s==null||s(v,l)},[f,C,s]),O=i.useCallback(function(v,l){T(),p==null||p(v,l)},[T,p]),A=i.useCallback(function(v,l){return g==null?void 0:g(v,l)},[g]);return a.jsx(a.Fragment,{children:m(function(v,l){return i.createElement(t,{node:l,style:v,blendMode:j,isInteractive:n,onMouseEnter:n?x:void 0,onMouseMove:n?y:void 0,onMouseLeave:n?O:void 0,onClick:n?A:void 0})})})},Lo=function(e){var o=e.nodes,t=e.width,n=e.height,d=e.onMouseEnter,s=e.onMouseMove,p=e.onMouseLeave,g=e.onClick,f=e.tooltip,j=e.debug,I=Fe(),M=I.showTooltipFromEvent,u=I.hideTooltip,m=i.useCallback(function(x,y){M(i.createElement(f,{node:x}),y),d&&d(x,y)},[M,f,d]),B=i.useCallback(function(x,y){M(i.createElement(f,{node:x}),y),s&&s(x,y)},[M,f,s]),C=i.useCallback(function(x,y){u(),p&&p(x,y)},[u,p]),T=i.useCallback(function(x,y){g&&g(x,y)},[g]);return a.jsx(bo,{nodes:o,width:t,height:n,onMouseEnter:m,onMouseMove:B,onMouseLeave:C,onClick:T,debug:j})},Fo=["isInteractive","animate","motionConfig","theme","renderWrapper"],Wo=function(e){var o=e.data,t=e.xScale,n=t===void 0?c.xScale:t,d=e.xFormat,s=e.yScale,p=s===void 0?c.yScale:s,g=e.yFormat,f=e.width,j=e.height,I=e.margin,M=e.layers,u=M===void 0?c.layers:M,m=e.colors,B=m===void 0?c.colors:m,C=e.blendMode,T=C===void 0?c.blendMode:C,x=e.nodeId,y=x===void 0?c.nodeId:x,O=e.nodeSize,A=O===void 0?c.nodeSize:O,v=e.nodeComponent,l=v===void 0?c.nodeComponent:v,K=e.enableGridX,oe=K===void 0?c.enableGridX:K,te=e.enableGridY,ne=te===void 0?c.enableGridY:te,N=e.gridXValues,ie=e.gridYValues,W=e.axisTop,re=e.axisRight,J=e.axisBottom,Se=J===void 0?c.axisBottom:J,ce=e.axisLeft,ke=ce===void 0?c.axisLeft:ce,he=e.annotations,Ee=he===void 0?c.annotations:he,fe=e.isInteractive,U=fe===void 0?c.isInteractive:fe,me=e.useMesh,ve=me===void 0?c.useMesh:me,Z=e.debugMesh,ge=Z===void 0?c.debugMesh:Z,G=e.onMouseEnter,ae=e.onMouseMove,xe=e.onMouseLeave,pe=e.onClick,ye=e.tooltip,be=ye===void 0?c.tooltip:ye,se=e.markers,P=se===void 0?c.markers:se,D=e.legends,we=D===void 0?c.legends:D,S=e.role,de=S===void 0?c.role:S,ee=e.ariaLabel,E=e.ariaLabelledBy,z=e.ariaDescribedBy,b=Ye(f,j,I),H=b.margin,k=b.innerWidth,L=b.innerHeight,V=b.outerWidth,$=b.outerHeight,R=Pe({data:o,xScaleSpec:n,xFormat:d,yScaleSpec:p,yFormat:g,width:k,height:L,nodeId:y,nodeSize:A,colors:B}),q=R.xScale,_=R.yScale,Q=R.nodes,Ce=R.legendData,Me=i.useMemo(function(){return{xScale:q,yScale:_,nodes:Q,margin:H,innerWidth:k,innerHeight:L,outerWidth:V,outerHeight:$}},[q,_,Q,H,k,L,V,$]),X={grid:null,axes:null,nodes:null,markers:null,mesh:null,annotations:null,legends:null};return u.includes("grid")&&(X.grid=a.jsx(ro,{width:k,height:L,xScale:oe?q:null,yScale:ne?_:null,xValues:N,yValues:ie},"grid")),u.includes("axes")&&(X.axes=a.jsx(ao,{xScale:q,yScale:_,width:k,height:L,top:W,right:re,bottom:Se,left:ke},"axes")),u.includes("nodes")&&(X.nodes=a.jsx(zo,{nodes:Q,nodeComponent:l,isInteractive:U,tooltip:be,blendMode:T,onMouseEnter:G,onMouseMove:ae,onMouseLeave:xe,onClick:pe},"nodes")),u.includes("markers")&&(X.markers=a.jsx(Ue,{markers:P,width:k,height:L,xScale:q,yScale:_},"markers")),u.includes("mesh")&&U&&ve&&(X.mesh=a.jsx(Lo,{nodes:Q,width:k,height:L,onMouseEnter:G,onMouseMove:ae,onMouseLeave:xe,onClick:pe,tooltip:be,debug:ge},"mesh")),u.includes("annotations")&&(X.annotations=a.jsx(jo,{nodes:Q,annotations:Ee},"annotations")),u.includes("legends")&&(X.legends=we.map(function(Y,le){return a.jsx(Ze,F({},Y,{containerWidth:k,containerHeight:L,data:Ce}),le)})),a.jsx(qe,{width:V,height:$,margin:H,role:de,ariaLabel:ee,ariaLabelledBy:E,ariaDescribedBy:z,children:u.map(function(Y,le){if(typeof Y=="string"&&X[Y]!==void 0)return X[Y];if(typeof Y=="function")return a.jsx(i.Fragment,{children:i.createElement(Y,Me)},le);throw new Error("Unknown layer ("+Y+")")})})},Ro=function(e){var o=e.isInteractive,t=o===void 0?c.isInteractive:o,n=e.animate,d=n===void 0?c.animate:n,s=e.motionConfig,p=s===void 0?c.motionConfig:s,g=e.theme,f=e.renderWrapper,j=Oe(e,Fo);return a.jsx(He,{animate:d,isInteractive:t,motionConfig:p,renderWrapper:f,theme:g,children:a.jsx(Wo,F({isInteractive:t},j))})},Xo=function(e){return a.jsx(Ge,{children:function(o){var t=o.width,n=o.height;return a.jsx(Ro,F({width:t,height:n},e))}})},Bo=["isInteractive","renderWrapper","theme"],To=function(e){var o=e.data,t=e.xScale,n=t===void 0?w.xScale:t,d=e.xFormat,s=e.yScale,p=s===void 0?w.yScale:s,g=e.yFormat,f=e.width,j=e.height,I=e.margin,M=e.pixelRatio,u=M===void 0?w.pixelRatio:M,m=e.layers,B=m===void 0?w.layers:m,C=e.colors,T=C===void 0?w.colors:C,x=e.nodeId,y=x===void 0?c.nodeId:x,O=e.nodeSize,A=O===void 0?w.nodeSize:O,v=e.renderNode,l=v===void 0?w.renderNode:v,K=e.enableGridX,oe=K===void 0?w.enableGridX:K,te=e.gridXValues,ne=e.enableGridY,N=ne===void 0?w.enableGridY:ne,ie=e.gridYValues,W=e.axisTop,re=e.axisRight,J=e.axisBottom,Se=J===void 0?w.axisBottom:J,ce=e.axisLeft,ke=ce===void 0?w.axisLeft:ce,he=e.annotations,Ee=he===void 0?w.annotations:he,fe=e.isInteractive,U=fe===void 0?w.isInteractive:fe,me=e.debugMesh,ve=me===void 0?w.debugMesh:me,Z=e.onMouseEnter,ge=e.onMouseMove,G=e.onMouseLeave,ae=e.onClick,xe=e.tooltip,pe=xe===void 0?w.tooltip:xe,ye=e.legends,be=ye===void 0?w.legends:ye,se=e.canvasRef,P=i.useRef(null),D=oo(),we=i.useState(null),S=we[0],de=we[1],ee=Ye(f,j,I),E=ee.margin,z=ee.innerWidth,b=ee.innerHeight,H=ee.outerWidth,k=ee.outerHeight,L=Pe({data:o,xScaleSpec:n,xFormat:d,yScaleSpec:p,yFormat:g,width:z,height:b,nodeId:y,nodeSize:A,colors:T}),V=L.xScale,$=L.yScale,R=L.nodes,q=L.legendData,_=De(R,Ee),Q=Mo({points:R,width:z,height:b,debug:ve}),Ce=Q.delaunay,Me=Q.voronoi,X=i.useMemo(function(){return{xScale:V,yScale:$,nodes:R,margin:E,innerWidth:z,innerHeight:b,outerWidth:H,outerHeight:k}},[V,$,R,E,z,b,H,k]);i.useEffect(function(){if(P.current){P.current.width=H*u,P.current.height=k*u;var r=P.current.getContext("2d");r.scale(u,u),r.fillStyle=D.background,r.fillRect(0,0,H,k),r.translate(E.left,E.top),B.forEach(function(h){if(h==="grid")r.lineWidth=D.grid.line.strokeWidth,r.strokeStyle=D.grid.line.stroke,oe&&Te(r,{width:z,height:b,scale:V,axis:"x",values:te}),N&&Te(r,{width:z,height:b,scale:$,axis:"y",values:ie});else if(h==="annotations")mo(r,{annotations:_,theme:D});else if(h==="axes")uo(r,{xScale:V,yScale:$,width:z,height:b,top:W,right:re,bottom:Se,left:ke,theme:D});else if(h==="nodes")R.forEach(function(ue){l(r,ue)});else if(h==="mesh")ve&&(So(r,Me),S&&ko(r,Me,S.index));else if(h==="legends")be.forEach(function(ue){to(r,F({},ue,{data:q,containerWidth:z,containerHeight:b,theme:D}))});else{if(typeof h!="function")throw new Error("Invalid layer: "+h);h(r,X)}})}},[P,z,b,H,k,E.top,E.left,u,l,B,X,D,V,$,R,oe,N,W,re,Se,ke,be,q,ve,Me,S,_]);var Y=Fe(),le=Y.showTooltipFromEvent,je=Y.hideTooltip,Ie=i.useCallback(function(r){var h=no(P.current,r),ue=h[0],Re=h[1];if(!io(E.left,E.top,z,b,ue,Re))return null;var Ne=Ce.find(ue-E.left,Re-E.top);return R[Ne]},[P,E,z,b,Ce]),We=i.useCallback(function(r){var h=Ie(r);de(h),h?(le(i.createElement(pe,{node:h}),r),S&&S.id!==h.id&&(G&&G(S,r),Z&&Z(h,r)),S||Z&&Z(h,r),ge&&ge(h,r)):(je(),S&&G&&G(S,r))},[Ie,S,de,le,je,pe,Z,ge,G]),$e=i.useCallback(function(r){je(),de(null),S&&G&&G(S,r)},[je,S,de,G]),Ae=i.useCallback(function(r){if(ae){var h=Ie(r);h&&ae(h,r)}},[Ie,ae]);return a.jsx("canvas",{ref:function(r){P.current=r,se&&"current"in se&&(se.current=r)},width:H*u,height:k*u,style:{width:H,height:k,cursor:U?"auto":"normal"},onMouseEnter:U?We:void 0,onMouseMove:U?We:void 0,onMouseLeave:U?$e:void 0,onClick:U?Ae:void 0})},Go=i.forwardRef(function(e,o){var t=e.isInteractive,n=e.renderWrapper,d=e.theme,s=Oe(e,Bo);return a.jsx(He,{isInteractive:t,renderWrapper:n,theme:d,animate:!1,children:a.jsx(To,F({},s,{canvasRef:o}))})});i.forwardRef(function(e,o){return a.jsx(Ge,{children:function(t){var n=t.width,d=t.height;return a.jsx(Go,F({width:n,height:d},e,{ref:o}))}})});const Ao=({data:e})=>{var o,t;return!(e!=null&&e.length)||!((t=(o=e[0])==null?void 0:o.data)!=null&&t.length)?null:a.jsx(Xe,{sx:{height:"100%"},children:a.jsx(Xo,{data:e,margin:{top:20,right:20,bottom:60,left:90},xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:0,max:100},blendMode:"multiply",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Precio (COP)",legendPosition:"middle",legendOffset:46,format:n=>Je(n)},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"% Descuento",legendPosition:"middle",legendOffset:-60,format:n=>`${n}%`},nodeSize:8,tooltip:({node:n})=>a.jsxs(Xe,{sx:{bgcolor:"background.paper",p:1.5,boxShadow:1,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[a.jsx(ze,{variant:"body1",fontWeight:"bold",children:n.data.x.toLocaleString("es-CO")}),a.jsxs(ze,{variant:"body1",children:["Descuento: ",n.data.y,"%"]}),a.jsx(ze,{variant:"body2",color:"text.secondary",children:n.serieId})]})})})};export{Ao as default};
