import{j,r as O}from"./index-CK_uOnZG.js";import{I as Ne,K,L as J,N as Je,O as D,Q as me,S as re,U as Le,V as Qe,Y as B,a0 as Ue,a1 as En,a2 as Sn,G as Ae,E as le,c as Re,t as xe,q as te,Z as be,r as z,a3 as Pn,J as Vn,i as Bn,B as Gn,H as $n,_ as Dn,D as Fn,p as Hn,k as Xn,e as Yn,w as qn}from"./nivo-legends.es-CkyR2X4n.js";import{b as ye,a as ae,q as de}from"./isEqual-CcuYNxJE.js";import{c as $}from"./constant-BhYcI2Bl.js";import{p as Nn,m as Jn}from"./line-Dd27SOx5.js";function Qn(e){return e.innerRadius}function Un(e){return e.outerRadius}function Zn(e){return e.startAngle}function Kn(e){return e.endAngle}function zn(e){return e&&e.padAngle}function _n(e,n,r,a,s,l,i,t){var u=r-e,o=a-n,v=i-s,d=t-l,c=d*u-v*o;if(!(c*c<D))return c=(v*(n-l)-d*(e-s))/c,[e+c*u,n+c*o]}function pe(e,n,r,a,s,l,i){var t=e-r,u=n-a,o=(i?l:-l)/re(t*t+u*u),v=o*u,d=-o*t,c=e+v,A=n+d,f=r+v,R=a+d,h=(c+f)/2,M=(A+R)/2,x=f-c,g=R-A,b=x*x+g*g,p=s-l,y=c*R-f*A,w=(g<0?-1:1)*re(En(0,p*p*b-y*y)),P=(y*g-x*w)/b,T=(-y*x-g*w)/b,k=(y*g+x*w)/b,G=(-y*x+g*w)/b,L=P-h,C=T-M,X=k-h,V=G-M;return L*L+C*C>X*X+V*V&&(P=k,T=G),{cx:P,cy:T,x01:-v,y01:-d,x11:P*(s/p-1),y11:T*(s/p-1)}}function er(){var e=Qn,n=Un,r=$(0),a=null,s=Zn,l=Kn,i=zn,t=null;function u(){var o,v,d=+e.apply(this,arguments),c=+n.apply(this,arguments),A=s.apply(this,arguments)-Je,f=l.apply(this,arguments)-Je,R=Qe(f-A),h=f>A;if(t||(t=o=Nn()),c<d&&(v=c,c=d,d=v),!(c>D))t.moveTo(0,0);else if(R>me-D)t.moveTo(c*K(A),c*J(A)),t.arc(0,0,c,A,f,!h),d>D&&(t.moveTo(d*K(f),d*J(f)),t.arc(0,0,d,f,A,h));else{var M=A,x=f,g=A,b=f,p=R,y=R,w=i.apply(this,arguments)/2,P=w>D&&(a?+a.apply(this,arguments):re(d*d+c*c)),T=Le(Qe(c-d)/2,+r.apply(this,arguments)),k=T,G=T,L,C;if(P>D){var X=Ue(P/d*J(w)),V=Ue(P/c*J(w));(p-=X*2)>D?(X*=h?1:-1,g+=X,b-=X):(p=0,g=b=(A+f)/2),(y-=V*2)>D?(V*=h?1:-1,M+=V,x-=V):(y=0,M=x=(A+f)/2)}var E=c*K(M),F=c*J(M),Y=d*K(b),q=d*J(b);if(T>D){var N=c*K(x),Z=c*J(x),S=d*K(g),H=d*J(g),W;if(R<Ne&&(W=_n(E,F,S,H,N,Z,Y,q))){var ie=E-W[0],_=F-W[1],oe=N-W[0],ee=Z-W[1],ce=1/J(Sn((ie*oe+_*ee)/(re(ie*ie+_*_)*re(oe*oe+ee*ee)))/2),fe=re(W[0]*W[0]+W[1]*W[1]);k=Le(T,(d-fe)/(ce-1)),G=Le(T,(c-fe)/(ce+1))}}y>D?G>D?(L=pe(S,H,E,F,c,G,h),C=pe(N,Z,Y,q,c,G,h),t.moveTo(L.cx+L.x01,L.cy+L.y01),G<T?t.arc(L.cx,L.cy,G,B(L.y01,L.x01),B(C.y01,C.x01),!h):(t.arc(L.cx,L.cy,G,B(L.y01,L.x01),B(L.y11,L.x11),!h),t.arc(0,0,c,B(L.cy+L.y11,L.cx+L.x11),B(C.cy+C.y11,C.cx+C.x11),!h),t.arc(C.cx,C.cy,G,B(C.y11,C.x11),B(C.y01,C.x01),!h))):(t.moveTo(E,F),t.arc(0,0,c,M,x,!h)):t.moveTo(E,F),!(d>D)||!(p>D)?t.lineTo(Y,q):k>D?(L=pe(Y,q,N,Z,d,-k,h),C=pe(E,F,S,H,d,-k,h),t.lineTo(L.cx+L.x01,L.cy+L.y01),k<T?t.arc(L.cx,L.cy,k,B(L.y01,L.x01),B(C.y01,C.x01),!h):(t.arc(L.cx,L.cy,k,B(L.y01,L.x01),B(L.y11,L.x11),!h),t.arc(0,0,d,B(L.cy+L.y11,L.cx+L.x11),B(C.cy+C.y11,C.cx+C.x11),h),t.arc(C.cx,C.cy,k,B(C.y11,C.x11),B(C.y01,C.x01),!h))):t.arc(0,0,d,b,g,h)}if(t.closePath(),o)return t=null,o+""||null}return u.centroid=function(){var o=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,v=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2-Ne/2;return[K(v)*o,J(v)*o]},u.innerRadius=function(o){return arguments.length?(e=typeof o=="function"?o:$(+o),u):e},u.outerRadius=function(o){return arguments.length?(n=typeof o=="function"?o:$(+o),u):n},u.cornerRadius=function(o){return arguments.length?(r=typeof o=="function"?o:$(+o),u):r},u.padRadius=function(o){return arguments.length?(a=o==null?null:typeof o=="function"?o:$(+o),u):a},u.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:$(+o),u):s},u.endAngle=function(o){return arguments.length?(l=typeof o=="function"?o:$(+o),u):l},u.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:$(+o),u):i},u.context=function(o){return arguments.length?(t=o??null,u):t},u}function nr(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function rr(e){return e}function tr(){var e=rr,n=nr,r=null,a=$(0),s=$(me),l=$(0);function i(t){var u,o=t.length,v,d,c=0,A=new Array(o),f=new Array(o),R=+a.apply(this,arguments),h=Math.min(me,Math.max(-me,s.apply(this,arguments)-R)),M,x=Math.min(Math.abs(h)/o,l.apply(this,arguments)),g=x*(h<0?-1:1),b;for(u=0;u<o;++u)(b=f[A[u]=u]=+e(t[u],u,t))>0&&(c+=b);for(n!=null?A.sort(function(p,y){return n(f[p],f[y])}):r!=null&&A.sort(function(p,y){return r(t[p],t[y])}),u=0,d=c?(h-o*g)/c:0;u<o;++u,R=M)v=A[u],b=f[v],M=R+(b>0?b*d:0)+g,f[v]={data:t[v],index:u,value:b,startAngle:R,endAngle:M,padAngle:x};return f}return i.value=function(t){return arguments.length?(e=typeof t=="function"?t:$(+t),i):e},i.sortValues=function(t){return arguments.length?(n=t,r=null,i):n},i.sort=function(t){return arguments.length?(r=t,n=null,i):r},i.startAngle=function(t){return arguments.length?(a=typeof t=="function"?t:$(+t),i):a},i.endAngle=function(t){return arguments.length?(s=typeof t=="function"?t:$(+t),i):s},i.padAngle=function(t){return arguments.length?(l=typeof t=="function"?t:$(+t),i):l},i}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I.apply(this,arguments)}var ar={pointerEvents:"none"},ir=function(e){var n=e.label,r=e.style,a=le();return j.jsx(ae.g,{transform:r.transform,opacity:r.progress,style:ar,children:j.jsx(ae.text,{textAnchor:"middle",dominantBaseline:"central",style:I({},a.labels.text,{fill:r.textColor}),children:n})})},Ze=function(e){var n=e%(2*Math.PI);return n<0&&(n+=2*Math.PI),n},or=function(e,n){return e.filter(function(r){return Math.abs(xe(r.arc.endAngle-r.arc.startAngle))>=n})},ur={startAngle:{enter:function(e){return I({},e,{endAngle:e.startAngle})},update:function(e){return e},leave:function(e){return I({},e,{startAngle:e.endAngle})}},middleAngle:{enter:function(e){var n=e.startAngle+(e.endAngle-e.startAngle)/2;return I({},e,{startAngle:n,endAngle:n})},update:function(e){return e},leave:function(e){var n=e.startAngle+(e.endAngle-e.startAngle)/2;return I({},e,{startAngle:n,endAngle:n})}},endAngle:{enter:function(e){return I({},e,{startAngle:e.endAngle})},update:function(e){return e},leave:function(e){return I({},e,{endAngle:e.startAngle})}},innerRadius:{enter:function(e){return I({},e,{outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return I({},e,{innerRadius:e.outerRadius})}},centerRadius:{enter:function(e){var n=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return I({},e,{innerRadius:n,outerRadius:n})},update:function(e){return e},leave:function(e){var n=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return I({},e,{innerRadius:n,outerRadius:n})}},outerRadius:{enter:function(e){return I({},e,{innerRadius:e.outerRadius})},update:function(e){return e},leave:function(e){return I({},e,{outerRadius:e.innerRadius})}},pushIn:{enter:function(e){return I({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return I({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})}},pushOut:{enter:function(e){return I({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})},update:function(e){return e},leave:function(e){return I({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})}}},Ke=function(e,n){return O.useMemo(function(){var r=ur[e];return{enter:function(a){return I({progress:0},r.enter(a.arc),n?n.enter(a):{})},update:function(a){return I({progress:1},r.update(a.arc),n?n.update(a):{})},leave:function(a){return I({progress:0},r.leave(a.arc),n?n.leave(a):{})}}},[e,n])},sr=function(e,n){var r=Pn(e)-Math.PI/2,a=e.innerRadius+(e.outerRadius-e.innerRadius)*n;return te(r,a)},lr=function(e){return function(n,r,a,s){return de([n,r,a,s],function(l,i,t,u){var o=sr({startAngle:l,endAngle:i,innerRadius:t,outerRadius:u},e);return"translate("+o.x+","+o.y+")"})}},dr=function(e,n,r,a){n===void 0&&(n=.5),r===void 0&&(r="innerRadius");var s=be(),l=s.animate,i=s.config,t=Ke(r,a);return{transition:ye(e,{keys:function(u){return u.id},initial:t.update,from:t.enter,enter:t.update,update:t.update,leave:t.leave,config:i,immediate:!l}),interpolate:lr(n)}},cr=function(e){var n=e.center,r=e.data,a=e.transitionMode,s=e.label,l=e.radiusOffset,i=e.skipAngle,t=e.textColor,u=e.component,o=u===void 0?ir:u,v=Ae(s),d=le(),c=Re(t,d),A=O.useMemo(function(){return r.filter(function(x){return Math.abs(xe(x.arc.endAngle-x.arc.startAngle))>=i})},[r,i]),f=dr(A,l,a),R=f.transition,h=f.interpolate,M=o;return j.jsx("g",{transform:"translate("+n[0]+","+n[1]+")",children:R(function(x,g){return O.createElement(M,{key:g.id,datum:g,label:v(g),style:I({},x,{transform:h(x.startAngle,x.endAngle,x.innerRadius,x.outerRadius),textColor:c(g)})})})})},fr=function(e){var n=e.label,r=e.style,a=le();return j.jsxs(ae.g,{opacity:r.opacity,children:[j.jsx(ae.path,{fill:"none",stroke:r.linkColor,strokeWidth:r.thickness,d:r.path}),j.jsx(ae.text,{transform:r.textPosition,textAnchor:r.textAnchor,dominantBaseline:"central",style:I({},a.labels.text,{fill:r.textColor}),children:n})]})},gr=function(e){var n=Ze(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2);return n<Math.PI/2||n>1.5*Math.PI?"start":"end"},ze=function(e,n,r,a){var s,l,i=Ze(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2),t=te(i,e.outerRadius+n),u=te(i,e.outerRadius+n+r);return i<Math.PI/2||i>1.5*Math.PI?(s="after",l={x:u.x+a,y:u.y}):(s="before",l={x:u.x-a,y:u.y}),{side:s,points:[t,u,l]}},hr=Jn().x(function(e){return e.x}).y(function(e){return e.y}),vr=function(e,n,r,a,s,l,i){return de([e,n,r,a,s,l,i],function(t,u,o,v,d,c,A){var f=ze({startAngle:t,endAngle:u,outerRadius:v},d,c,A).points;return hr(f)})},pr=function(e,n,r,a){return de([e,n,r,a],function(s,l,i,t){return gr({startAngle:s,endAngle:l})})},mr=function(e,n,r,a,s,l,i,t){return de([e,n,r,a,s,l,i,t],function(u,o,v,d,c,A,f,R){var h=ze({startAngle:u,endAngle:o,outerRadius:d},c,A,f),M=h.points,x=h.side,g=M[2];return x==="before"?g.x-=R:g.x+=R,"translate("+g.x+","+g.y+")"})},Ar=function(e){var n=e.data,r=e.offset,a=r===void 0?0:r,s=e.diagonalLength,l=e.straightLength,i=e.skipAngle,t=i===void 0?0:i,u=e.textOffset,o=e.linkColor,v=e.textColor,d=be(),c=d.animate,A=d.config,f=le(),R=Re(o,f),h=Re(v,f),M=function(g,b){return O.useMemo(function(){return or(g,b)},[g,b])}(n,t),x=function(g){var b=g.offset,p=g.diagonalLength,y=g.straightLength,w=g.textOffset,P=g.getLinkColor,T=g.getTextColor;return O.useMemo(function(){return{enter:function(k){return{startAngle:k.arc.startAngle,endAngle:k.arc.endAngle,innerRadius:k.arc.innerRadius,outerRadius:k.arc.outerRadius,offset:b,diagonalLength:0,straightLength:0,textOffset:w,linkColor:P(k),textColor:T(k),opacity:0}},update:function(k){return{startAngle:k.arc.startAngle,endAngle:k.arc.endAngle,innerRadius:k.arc.innerRadius,outerRadius:k.arc.outerRadius,offset:b,diagonalLength:p,straightLength:y,textOffset:w,linkColor:P(k),textColor:T(k),opacity:1}},leave:function(k){return{startAngle:k.arc.startAngle,endAngle:k.arc.endAngle,innerRadius:k.arc.innerRadius,outerRadius:k.arc.outerRadius,offset:b,diagonalLength:0,straightLength:0,textOffset:w,linkColor:P(k),textColor:T(k),opacity:0}}}},[p,y,w,P,T,b])}({offset:a,diagonalLength:s,straightLength:l,textOffset:u,getLinkColor:R,getTextColor:h});return{transition:ye(M,{keys:function(g){return g.id},initial:x.update,from:x.enter,enter:x.update,update:x.update,leave:x.leave,config:A,immediate:!c}),interpolateLink:vr,interpolateTextAnchor:pr,interpolateTextPosition:mr}},Rr=function(e){var n=e.center,r=e.data,a=e.label,s=e.skipAngle,l=e.offset,i=e.diagonalLength,t=e.straightLength,u=e.strokeWidth,o=e.textOffset,v=e.textColor,d=e.linkColor,c=e.component,A=c===void 0?fr:c,f=Ae(a),R=Ar({data:r,skipAngle:s,offset:l,diagonalLength:i,straightLength:t,textOffset:o,linkColor:d,textColor:v}),h=R.transition,M=R.interpolateLink,x=R.interpolateTextAnchor,g=R.interpolateTextPosition,b=A;return j.jsx("g",{transform:"translate("+n[0]+","+n[1]+")",children:h(function(p,y){return O.createElement(b,{key:y.id,datum:y,label:f(y),style:I({},p,{thickness:u,path:M(p.startAngle,p.endAngle,p.innerRadius,p.outerRadius,p.offset,p.diagonalLength,p.straightLength),textAnchor:x(p.startAngle,p.endAngle,p.innerRadius,p.outerRadius),textPosition:g(p.startAngle,p.endAngle,p.innerRadius,p.outerRadius,p.offset,p.diagonalLength,p.straightLength,p.textOffset)})})})})},Lr=function(e){var n=e.datum,r=e.style,a=e.onClick,s=e.onMouseEnter,l=e.onMouseMove,i=e.onMouseLeave,t=O.useCallback(function(d){return a==null?void 0:a(n,d)},[a,n]),u=O.useCallback(function(d){return s==null?void 0:s(n,d)},[s,n]),o=O.useCallback(function(d){return l==null?void 0:l(n,d)},[l,n]),v=O.useCallback(function(d){return i==null?void 0:i(n,d)},[i,n]);return j.jsx(ae.path,{d:r.path,opacity:r.opacity,fill:n.fill||r.color,stroke:r.borderColor,strokeWidth:r.borderWidth,onClick:a?t:void 0,onMouseEnter:s?u:void 0,onMouseMove:l?o:void 0,onMouseLeave:i?v:void 0})},xr=function(e,n,r,a,s){return de([e,n,r,a],function(l,i,t,u){return s({startAngle:l,endAngle:i,innerRadius:Math.max(0,t),outerRadius:Math.max(0,u)})})},br=function(e,n,r){n===void 0&&(n="innerRadius");var a=be(),s=a.animate,l=a.config,i=Ke(n,r);return{transition:ye(e,{keys:function(t){return t.id},initial:i.update,from:i.enter,enter:i.update,update:i.update,leave:i.leave,config:l,immediate:!s}),interpolate:xr}},yr=function(e){var n=e.center,r=e.data,a=e.arcGenerator,s=e.borderWidth,l=e.borderColor,i=e.onClick,t=e.onMouseEnter,u=e.onMouseMove,o=e.onMouseLeave,v=e.transitionMode,d=e.component,c=d===void 0?Lr:d,A=le(),f=Re(l,A),R=br(r,v,{enter:function(g){return{opacity:0,color:g.color,borderColor:f(g)}},update:function(g){return{opacity:1,color:g.color,borderColor:f(g)}},leave:function(g){return{opacity:0,color:g.color,borderColor:f(g)}}}),h=R.transition,M=R.interpolate,x=c;return j.jsx("g",{transform:"translate("+n[0]+","+n[1]+")",children:h(function(g,b){return O.createElement(x,{key:b.id,datum:b,style:I({},g,{borderWidth:s,path:M(g.startAngle,g.endAngle,g.innerRadius,g.outerRadius,a)}),onClick:i,onMouseEnter:t,onMouseMove:u,onMouseLeave:o})})})},kr=function(e,n,r,a,s,l){l===void 0&&(l=!0);var i=[],t=te(z(a),r);i.push([t.x,t.y]);var u=te(z(s),r);i.push([u.x,u.y]);for(var o=Math.round(Math.min(a,s));o<=Math.round(Math.max(a,s));o++)if(o%90==0){var v=te(z(o),r);i.push([v.x,v.y])}i=i.map(function(h){var M=h[0],x=h[1];return[e+M,n+x]}),l&&i.push([e,n]);var d=i.map(function(h){return h[0]}),c=i.map(function(h){return h[1]}),A=Math.min.apply(Math,d),f=Math.max.apply(Math,d),R=Math.min.apply(Math,c);return{points:i,x:A,y:R,width:f-A,height:Math.max.apply(Math,c)-R}},Mr=function(e){var n=e===void 0?{}:e,r=n.cornerRadius,a=r===void 0?0:r,s=n.padAngle,l=s===void 0?0:s;return O.useMemo(function(){return er().innerRadius(function(i){return i.innerRadius}).outerRadius(function(i){return i.outerRadius}).cornerRadius(a).padAngle(l)},[a,l])};function U(){return U=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U.apply(this,arguments)}function _e(e,n){if(e==null)return{};var r,a,s={},l=Object.keys(e);for(a=0;a<l.length;a++)r=l[a],n.indexOf(r)>=0||(s[r]=e[r]);return s}var Cr=function(e){var n=e.width,r=e.height,a=e.legends,s=e.data,l=e.toggleSerie;return j.jsx(j.Fragment,{children:a.map(function(i,t){var u;return j.jsx(Yn,U({},i,{containerWidth:n,containerHeight:r,data:(u=i.data)!=null?u:s,toggleSerie:i.toggleSerie?l:void 0}),t)})})},m={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcs","arcLinkLabels","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(e){var n=e.datum;return j.jsx(qn,{id:n.id,value:n.formattedValue,enableChip:!0,color:n.color})},legends:[],role:"img"},Or=["points"],Ir=function(e){var n=e.data,r=e.id,a=r===void 0?m.id:r,s=e.value,l=s===void 0?m.value:s,i=e.valueFormat,t=e.colors,u=t===void 0?m.colors:t,o=Ae(a),v=Ae(l),d=Fn(i),c=Hn(u,"id");return O.useMemo(function(){return n.map(function(A){var f,R=o(A),h=v(A),M={id:R,label:(f=A.label)!=null?f:R,hidden:!1,value:h,formattedValue:d(h),data:A};return U({},M,{color:c(M)})})},[n,o,v,d,c])},jr=function(e){var n=e.data,r=e.startAngle,a=e.endAngle,s=e.innerRadius,l=e.outerRadius,i=e.padAngle,t=e.sortByValue,u=e.activeId,o=e.activeInnerRadiusOffset,v=e.activeOuterRadiusOffset,d=e.hiddenIds,c=O.useMemo(function(){var A=tr().value(function(f){return f.value}).startAngle(z(r)).endAngle(z(a)).padAngle(z(i));return t||A.sortValues(null),A},[r,a,i,t]);return O.useMemo(function(){var A=n.filter(function(f){return!d.includes(f.id)});return{dataWithArc:c(A).map(function(f){var R=Math.abs(f.endAngle-f.startAngle);return U({},f.data,{arc:{index:f.index,startAngle:f.startAngle,endAngle:f.endAngle,innerRadius:u===f.data.id?s-o:s,outerRadius:u===f.data.id?l+v:l,thickness:l-s,padAngle:f.padAngle,angle:R,angleDeg:xe(R)}})}),legendData:n.map(function(f){return U({},f,{hidden:d.includes(f.id)})})}},[c,n,d,u,s,o,l,v])},Tr=function(e){var n=e.data,r=e.width,a=e.height,s=e.innerRadius,l=s===void 0?m.innerRadius:s,i=e.startAngle,t=i===void 0?m.startAngle:i,u=e.endAngle,o=u===void 0?m.endAngle:u,v=e.padAngle,d=v===void 0?m.padAngle:v,c=e.sortByValue,A=c===void 0?m.sortByValue:c,f=e.cornerRadius,R=f===void 0?m.cornerRadius:f,h=e.fit,M=h===void 0?m.fit:h,x=e.activeInnerRadiusOffset,g=x===void 0?m.activeInnerRadiusOffset:x,b=e.activeOuterRadiusOffset,p=b===void 0?m.activeOuterRadiusOffset:b,y=O.useState(null),w=y[0],P=y[1],T=O.useState([]),k=T[0],G=T[1],L=O.useMemo(function(){var V,E=Math.min(r,a)/2,F=E*Math.min(l,1),Y=r/2,q=a/2;if(M){var N=kr(Y,q,E,t-90,o-90),Z=N.points,S=_e(N,Or),H=Math.min(r/S.width,a/S.height),W={width:S.width*H,height:S.height*H};W.x=(r-W.width)/2,W.y=(a-W.height)/2,Y=(Y-S.x)/S.width*S.width*H+W.x,q=(q-S.y)/S.height*S.height*H+W.y,V={box:S,ratio:H,points:Z},E*=H,F*=H}return{centerX:Y,centerY:q,radius:E,innerRadius:F,debug:V}},[r,a,l,t,o,M,R]),C=jr({data:n,startAngle:t,endAngle:o,innerRadius:L.innerRadius,outerRadius:L.radius,padAngle:d,sortByValue:A,activeId:w,activeInnerRadiusOffset:g,activeOuterRadiusOffset:p,hiddenIds:k}),X=O.useCallback(function(V){G(function(E){return E.indexOf(V)>-1?E.filter(function(F){return F!==V}):[].concat(E,[V])})},[]);return U({arcGenerator:Mr({cornerRadius:R,padAngle:z(d)}),setActiveId:P,toggleSerie:X},C,L)},Wr=function(e){var n=e.dataWithArc,r=e.arcGenerator,a=e.centerX,s=e.centerY,l=e.radius,i=e.innerRadius;return O.useMemo(function(){return{dataWithArc:n,arcGenerator:r,centerX:a,centerY:s,radius:l,innerRadius:i}},[n,r,a,s,l,i])},wr=function(e){var n=e.center,r=e.data,a=e.arcGenerator,s=e.borderWidth,l=e.borderColor,i=e.isInteractive,t=e.onClick,u=e.onMouseEnter,o=e.onMouseMove,v=e.onMouseLeave,d=e.setActiveId,c=e.tooltip,A=e.transitionMode,f=Xn(),R=f.showTooltipFromEvent,h=f.hideTooltip,M=O.useMemo(function(){if(i)return function(p,y){t==null||t(p,y)}},[i,t]),x=O.useMemo(function(){if(i)return function(p,y){R(O.createElement(c,{datum:p}),y),d(p.id),u==null||u(p,y)}},[i,R,d,u,c]),g=O.useMemo(function(){if(i)return function(p,y){R(O.createElement(c,{datum:p}),y),o==null||o(p,y)}},[i,R,o,c]),b=O.useMemo(function(){if(i)return function(p,y){h(),d(null),v==null||v(p,y)}},[i,h,d,v]);return j.jsx(yr,{center:n,data:r,arcGenerator:a,borderWidth:s,borderColor:l,transitionMode:A,onClick:M,onMouseEnter:x,onMouseMove:g,onMouseLeave:b})},Er=["isInteractive","animate","motionConfig","theme","renderWrapper"],Sr=function(e){var n=e.data,r=e.id,a=r===void 0?m.id:r,s=e.value,l=s===void 0?m.value:s,i=e.valueFormat,t=e.sortByValue,u=t===void 0?m.sortByValue:t,o=e.layers,v=o===void 0?m.layers:o,d=e.startAngle,c=d===void 0?m.startAngle:d,A=e.endAngle,f=A===void 0?m.endAngle:A,R=e.padAngle,h=R===void 0?m.padAngle:R,M=e.fit,x=M===void 0?m.fit:M,g=e.innerRadius,b=g===void 0?m.innerRadius:g,p=e.cornerRadius,y=p===void 0?m.cornerRadius:p,w=e.activeInnerRadiusOffset,P=w===void 0?m.activeInnerRadiusOffset:w,T=e.activeOuterRadiusOffset,k=T===void 0?m.activeOuterRadiusOffset:T,G=e.width,L=e.height,C=e.margin,X=e.colors,V=X===void 0?m.colors:X,E=e.borderWidth,F=E===void 0?m.borderWidth:E,Y=e.borderColor,q=Y===void 0?m.borderColor:Y,N=e.enableArcLabels,Z=N===void 0?m.enableArcLabels:N,S=e.arcLabel,H=S===void 0?m.arcLabel:S,W=e.arcLabelsSkipAngle,ie=W===void 0?m.arcLabelsSkipAngle:W,_=e.arcLabelsTextColor,oe=_===void 0?m.arcLabelsTextColor:_,ee=e.arcLabelsRadiusOffset,ce=ee===void 0?m.arcLabelsRadiusOffset:ee,fe=e.arcLabelsComponent,ke=e.enableArcLinkLabels,en=ke===void 0?m.enableArcLinkLabels:ke,Me=e.arcLinkLabel,nn=Me===void 0?m.arcLinkLabel:Me,Ce=e.arcLinkLabelsSkipAngle,rn=Ce===void 0?m.arcLinkLabelsSkipAngle:Ce,Oe=e.arcLinkLabelsOffset,tn=Oe===void 0?m.arcLinkLabelsOffset:Oe,Ie=e.arcLinkLabelsDiagonalLength,an=Ie===void 0?m.arcLinkLabelsDiagonalLength:Ie,je=e.arcLinkLabelsStraightLength,on=je===void 0?m.arcLinkLabelsStraightLength:je,Te=e.arcLinkLabelsThickness,un=Te===void 0?m.arcLinkLabelsThickness:Te,We=e.arcLinkLabelsTextOffset,sn=We===void 0?m.arcLinkLabelsTextOffset:We,we=e.arcLinkLabelsTextColor,ln=we===void 0?m.arcLinkLabelsTextColor:we,Ee=e.arcLinkLabelsColor,dn=Ee===void 0?m.arcLinkLabelsColor:Ee,cn=e.arcLinkLabelComponent,Se=e.defs,fn=Se===void 0?m.defs:Se,Pe=e.fill,gn=Pe===void 0?m.fill:Pe,Ve=e.isInteractive,hn=Ve===void 0?m.isInteractive:Ve,vn=e.onClick,pn=e.onMouseEnter,mn=e.onMouseMove,An=e.onMouseLeave,Be=e.tooltip,Rn=Be===void 0?m.tooltip:Be,Ge=e.transitionMode,$e=Ge===void 0?m.transitionMode:Ge,De=e.legends,Fe=De===void 0?m.legends:De,He=e.role,Ln=He===void 0?m.role:He,ue=Gn(G,L,C),xn=ue.outerWidth,bn=ue.outerHeight,yn=ue.margin,Xe=ue.innerWidth,Ye=ue.innerHeight,kn=Ir({data:n,id:a,value:l,valueFormat:i,colors:V}),Q=Tr({data:kn,width:Xe,height:Ye,fit:x,innerRadius:b,startAngle:c,endAngle:f,padAngle:h,sortByValue:u,cornerRadius:y,activeInnerRadiusOffset:P,activeOuterRadiusOffset:k}),se=Q.dataWithArc,Mn=Q.legendData,qe=Q.arcGenerator,ge=Q.centerX,he=Q.centerY,Cn=Q.radius,On=Q.innerRadius,In=Q.setActiveId,jn=Q.toggleSerie,Tn=$n(fn,se,gn),ne={arcs:null,arcLinkLabels:null,arcLabels:null,legends:null};v.includes("arcs")&&(ne.arcs=j.jsx(wr,{center:[ge,he],data:se,arcGenerator:qe,borderWidth:F,borderColor:q,isInteractive:hn,onClick:vn,onMouseEnter:pn,onMouseMove:mn,onMouseLeave:An,setActiveId:In,tooltip:Rn,transitionMode:$e},"arcs")),en&&v.includes("arcLinkLabels")&&(ne.arcLinkLabels=j.jsx(Rr,{center:[ge,he],data:se,label:nn,skipAngle:rn,offset:tn,diagonalLength:an,straightLength:on,strokeWidth:un,textOffset:sn,textColor:ln,linkColor:dn,component:cn},"arcLinkLabels")),Z&&v.includes("arcLabels")&&(ne.arcLabels=j.jsx(cr,{center:[ge,he],data:se,label:H,radiusOffset:ce,skipAngle:ie,textColor:oe,transitionMode:$e,component:fe},"arcLabels")),Fe.length>0&&v.includes("legends")&&(ne.legends=j.jsx(Cr,{width:Xe,height:Ye,data:Mn,legends:Fe,toggleSerie:jn},"legends"));var Wn=Wr({dataWithArc:se,arcGenerator:qe,centerX:ge,centerY:he,radius:Cn,innerRadius:On});return j.jsx(Dn,{width:xn,height:bn,margin:yn,defs:Tn,role:Ln,children:v.map(function(ve,wn){return ne[ve]!==void 0?ne[ve]:typeof ve=="function"?j.jsx(O.Fragment,{children:O.createElement(ve,Wn)},wn):null})})},Pr=function(e){var n=e.isInteractive,r=n===void 0?m.isInteractive:n,a=e.animate,s=a===void 0?m.animate:a,l=e.motionConfig,i=l===void 0?m.motionConfig:l,t=e.theme,u=e.renderWrapper,o=_e(e,Er);return j.jsx(Bn,{animate:s,isInteractive:r,motionConfig:i,renderWrapper:u,theme:t,children:j.jsx(Sr,U({isInteractive:r},o))})},Fr=function(e){return j.jsx(Vn,{children:function(n){var r=n.width,a=n.height;return j.jsx(Pr,U({width:r,height:a},e))}})};export{Fr as $};
