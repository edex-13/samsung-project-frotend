import{r as E,j as H}from"./index-BzG-UDRL.js";import{F as et}from"./nivo-legends.es-DbnQh6rU.js";const J=Math.pow(2,-52),X=new Uint32Array(512);class G{static from(t,e=ht,n=rt){const i=t.length,l=new Float64Array(i*2);for(let s=0;s<i;s++){const h=t[s];l[2*s]=e(h),l[2*s+1]=n(h)}return new G(l)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:l}=this,s=t.length>>1;let h=1/0,o=1/0,c=-1/0,u=-1/0;for(let d=0;d<s;d++){const m=t[2*d],w=t[2*d+1];m<h&&(h=m),w<o&&(o=w),m>c&&(c=m),w>u&&(u=w),this._ids[d]=d}const g=(h+c)/2,f=(o+u)/2;let a=1/0,_,y,b;for(let d=0;d<s;d++){const m=W(g,f,t[2*d],t[2*d+1]);m<a&&(_=d,a=m)}const x=t[2*_],T=t[2*_+1];a=1/0;for(let d=0;d<s;d++){if(d===_)continue;const m=W(x,T,t[2*d],t[2*d+1]);m<a&&m>0&&(y=d,a=m)}let M=t[2*y],C=t[2*y+1],z=1/0;for(let d=0;d<s;d++){if(d===_||d===y)continue;const m=st(x,T,M,C,t[2*d],t[2*d+1]);m<z&&(b=d,z=m)}let j=t[2*b],L=t[2*b+1];if(z===1/0){for(let w=0;w<s;w++)this._dists[w]=t[2*w]-t[0]||t[2*w+1]-t[1];N(this._ids,this._dists,0,s-1);const d=new Uint32Array(s);let m=0;for(let w=0,k=-1/0;w<s;w++){const S=this._ids[w];this._dists[S]>k&&(d[m++]=S,k=this._dists[S])}this.hull=d.subarray(0,m),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Y(x,T,M,C,j,L)){const d=y,m=M,w=C;y=b,M=j,C=L,b=d,j=m,L=w}const A=lt(x,T,M,C,j,L);this._cx=A.x,this._cy=A.y;for(let d=0;d<s;d++)this._dists[d]=W(t[2*d],t[2*d+1],A.x,A.y);N(this._ids,this._dists,0,s-1),this._hullStart=_;let v=3;n[_]=e[b]=y,n[y]=e[_]=b,n[b]=e[y]=_,i[_]=0,i[y]=1,i[b]=2,l.fill(-1),l[this._hashKey(x,T)]=_,l[this._hashKey(M,C)]=y,l[this._hashKey(j,L)]=b,this.trianglesLen=0,this._addTriangle(_,y,b,-1,-1,-1);for(let d=0,m,w;d<this._ids.length;d++){const k=this._ids[d],S=t[2*k],F=t[2*k+1];if(d>0&&Math.abs(S-m)<=J&&Math.abs(F-w)<=J||(m=S,w=F,k===_||k===y||k===b))continue;let $=0;for(let R=0,tt=this._hashKey(S,F);R<this._hashSize&&($=l[(tt+R)%this._hashSize],!($!==-1&&$!==n[$]));R++);$=e[$];let p=$,I;for(;I=n[p],!Y(S,F,t[2*p],t[2*p+1],t[2*I],t[2*I+1]);)if(p=I,p===$){p=-1;break}if(p===-1)continue;let U=this._addTriangle(p,k,n[p],-1,-1,i[p]);i[k]=this._legalize(U+2),i[p]=U,v++;let P=n[p];for(;I=n[P],Y(S,F,t[2*P],t[2*P+1],t[2*I],t[2*I+1]);)U=this._addTriangle(P,k,I,i[k],-1,i[P]),i[k]=this._legalize(U+2),n[P]=P,v--,P=I;if(p===$)for(;I=e[p],Y(S,F,t[2*I],t[2*I+1],t[2*p],t[2*p+1]);)U=this._addTriangle(I,k,p,-1,i[p],i[I]),this._legalize(U+2),i[I]=U,n[p]=p,v--,p=I;this._hullStart=e[k]=p,n[p]=e[P]=k,n[k]=P,l[this._hashKey(S,F)]=k,l[this._hashKey(t[2*p],t[2*p+1])]=p}this.hull=new Uint32Array(v);for(let d=0,m=this._hullStart;d<v;d++)this.hull[d]=m,m=n[m];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(it(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let l=0,s=0;for(;;){const h=n[t],o=t-t%3;if(s=o+(t+2)%3,h===-1){if(l===0)break;t=X[--l];continue}const c=h-h%3,u=o+(t+1)%3,g=c+(h+2)%3,f=e[s],a=e[t],_=e[u],y=e[g];if(nt(i[2*f],i[2*f+1],i[2*a],i[2*a+1],i[2*_],i[2*_+1],i[2*y],i[2*y+1])){e[t]=y,e[h]=f;const x=n[g];if(x===-1){let M=this._hullStart;do{if(this._hullTri[M]===g){this._hullTri[M]=t;break}M=this._hullPrev[M]}while(M!==this._hullStart)}this._link(t,x),this._link(h,n[s]),this._link(s,g);const T=c+(h+1)%3;l<X.length&&(X[l++]=T)}else{if(l===0)break;t=X[--l]}}return s}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,l,s){const h=this.trianglesLen;return this._triangles[h]=t,this._triangles[h+1]=e,this._triangles[h+2]=n,this._link(h,i),this._link(h+1,l),this._link(h+2,s),this.trianglesLen+=3,h}}function it(r,t){const e=r/(Math.abs(r)+Math.abs(t));return(t>0?3-e:1+e)/4}function W(r,t,e,n){const i=r-e,l=t-n;return i*i+l*l}function V(r,t,e,n,i,l){const s=(n-t)*(i-r),h=(e-r)*(l-t);return Math.abs(s-h)>=33306690738754716e-32*Math.abs(s+h)?s-h:0}function Y(r,t,e,n,i,l){return(V(i,l,r,t,e,n)||V(r,t,e,n,i,l)||V(e,n,i,l,r,t))<0}function nt(r,t,e,n,i,l,s,h){const o=r-s,c=t-h,u=e-s,g=n-h,f=i-s,a=l-h,_=o*o+c*c,y=u*u+g*g,b=f*f+a*a;return o*(g*b-y*a)-c*(u*b-y*f)+_*(u*a-g*f)<0}function st(r,t,e,n,i,l){const s=e-r,h=n-t,o=i-r,c=l-t,u=s*s+h*h,g=o*o+c*c,f=.5/(s*c-h*o),a=(c*u-h*g)*f,_=(s*g-o*u)*f;return a*a+_*_}function lt(r,t,e,n,i,l){const s=e-r,h=n-t,o=i-r,c=l-t,u=s*s+h*h,g=o*o+c*c,f=.5/(s*c-h*o),a=r+(c*u-h*g)*f,_=t+(s*g-o*u)*f;return{x:a,y:_}}function N(r,t,e,n){if(n-e<=20)for(let i=e+1;i<=n;i++){const l=r[i],s=t[l];let h=i-1;for(;h>=e&&t[r[h]]>s;)r[h+1]=r[h--];r[h+1]=l}else{const i=e+n>>1;let l=e+1,s=n;O(r,i,l),t[r[e]]>t[r[n]]&&O(r,e,n),t[r[l]]>t[r[n]]&&O(r,l,n),t[r[e]]>t[r[l]]&&O(r,e,l);const h=r[l],o=t[h];for(;;){do l++;while(t[r[l]]<o);do s--;while(t[r[s]]>o);if(s<l)break;O(r,l,s)}r[e+1]=r[s],r[s]=h,n-l+1>=s-e?(N(r,t,l,n),N(r,t,e,s-1)):(N(r,t,e,s-1),N(r,t,l,n))}}function O(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}function ht(r){return r[0]}function rt(r){return r[1]}const Q=1e-6;class K{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;const i=t+n,l=e;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${l}`:(Math.abs(this._x1-i)>Q||Math.abs(this._y1-l)>Q)&&(this._+="L"+i+","+l),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=l}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class Z{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class ot{constructor(t,[e,n,i,l]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((l=+l)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=l,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this,l=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let a=0,_=0,y=n.length,b,x;a<y;a+=3,_+=2){const T=n[a]*2,M=n[a+1]*2,C=n[a+2]*2,z=t[T],j=t[T+1],L=t[M],A=t[M+1],v=t[C],d=t[C+1],m=L-z,w=A-j,k=v-z,S=d-j,F=m*m+w*w,$=k*k+S*S,p=(m*S-w*k)*2;if(!p)b=(z+v)/2-1e8*S,x=(j+d)/2+1e8*k;else if(Math.abs(p)<1e-8)b=(z+v)/2,x=(j+d)/2;else{const I=1/p;b=z+(S*F-w*$)*I,x=j+(m*$-k*F)*I}l[_]=b,l[_+1]=x}let s=e[e.length-1],h,o=s*4,c,u=t[2*s],g,f=t[2*s+1];i.fill(0);for(let a=0;a<e.length;++a)s=e[a],h=o,c=u,g=f,o=s*4,u=t[2*s],f=t[2*s+1],i[h+2]=i[o]=g-f,i[h+3]=i[o+1]=u-c}render(t){const e=t==null?t=new K:void 0,{delaunay:{halfedges:n,inedges:i,hull:l},circumcenters:s,vectors:h}=this;if(l.length<=1)return null;for(let u=0,g=n.length;u<g;++u){const f=n[u];if(f<u)continue;const a=Math.floor(u/3)*2,_=Math.floor(f/3)*2,y=s[a],b=s[a+1],x=s[_],T=s[_+1];this._renderSegment(y,b,x,T,t)}let o,c=l[l.length-1];for(let u=0;u<l.length;++u){o=c,c=l[u];const g=Math.floor(i[c]/3)*2,f=s[g],a=s[g+1],_=o*4,y=this._project(f,a,h[_+2],h[_+3]);y&&this._renderSegment(f,a,y[0],y[1],t)}return e&&e.value()}renderBounds(t){const e=t==null?t=new K:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=e==null?e=new K:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let l=i.length;for(;i[0]===i[l-2]&&i[1]===i[l-1]&&l>1;)l-=2;for(let s=2;s<l;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&e.lineTo(i[s],i[s+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i)}}cellPolygon(t){const e=new Z;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,l){let s;const h=this._regioncode(t,e),o=this._regioncode(n,i);h===0&&o===0?(l.moveTo(t,e),l.lineTo(n,i)):(s=this._clipSegment(t,e,n,i,h,o))&&(l.moveTo(s[0],s[1]),l.lineTo(s[2],s[3]))}contains(t,e,n){return e=+e,e!==e||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const i=this._clip(n);if(i){t:for(let l=0,s=e.length;l<s;l+=2)for(let h=0,o=i.length;h<o;h+=2)if(e[l]==i[h]&&e[l+1]==i[h+1]&&e[(l+2)%s]==i[(h+o-2)%o]&&e[(l+3)%s]==i[(h+o-1)%o]){yield n;break t}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:l}}=this,s=n[t];if(s===-1)return null;const h=[];let o=s;do{const c=Math.floor(o/3);if(h.push(e[c*2],e[c*2+1]),o=o%3===2?o-2:o+1,l[o]!==t)break;o=i[o]}while(o!==s&&o!==-1);return h}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:n}=this,i=t*4;return n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let i=null,l,s,h=e[n-2],o=e[n-1],c,u=this._regioncode(h,o),g,f;for(let a=0;a<n;a+=2)if(l=h,s=o,h=e[a],o=e[a+1],c=u,u=this._regioncode(h,o),c===0&&u===0)g=f,f=0,i?i.push(h,o):i=[h,o];else{let _,y,b,x,T;if(c===0){if((_=this._clipSegment(l,s,h,o,c,u))===null)continue;[y,b,x,T]=_}else{if((_=this._clipSegment(h,o,l,s,u,c))===null)continue;[x,T,y,b]=_,g=f,f=this._edgecode(y,b),g&&f&&this._edge(t,g,f,i,i.length),i?i.push(y,b):i=[y,b]}g=f,f=this._edgecode(x,T),g&&f&&this._edge(t,g,f,i,i.length),i?i.push(x,T):i=[x,T]}if(i)g=f,f=this._edgecode(i[0],i[1]),g&&f&&this._edge(t,g,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,e,n,i,l,s){for(;;){if(l===0&&s===0)return[t,e,n,i];if(l&s)return null;let h,o,c=l||s;c&8?(h=t+(n-t)*(this.ymax-e)/(i-e),o=this.ymax):c&4?(h=t+(n-t)*(this.ymin-e)/(i-e),o=this.ymin):c&2?(o=e+(i-e)*(this.xmax-t)/(n-t),h=this.xmax):(o=e+(i-e)*(this.xmin-t)/(n-t),h=this.xmin),l?(t=h,e=o,l=this._regioncode(t,e)):(n=h,i=o,s=this._regioncode(n,i))}}_clipInfinite(t,e,n,i,l,s){let h=Array.from(e),o;if((o=this._project(h[0],h[1],n,i))&&h.unshift(o[0],o[1]),(o=this._project(h[h.length-2],h[h.length-1],l,s))&&h.push(o[0],o[1]),h=this._clipFinite(t,h))for(let c=0,u=h.length,g,f=this._edgecode(h[u-2],h[u-1]);c<u;c+=2)g=f,f=this._edgecode(h[c],h[c+1]),g&&f&&(c=this._edge(t,g,f,h,c),u=h.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(h=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return h}_edge(t,e,n,i,l){for(;e!==n;){let s,h;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,h=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,h=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,h=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,h=this.ymin;break}(i[l]!==s||i[l+1]!==h)&&this.contains(t,s,h)&&(i.splice(l,0,s,h),l+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const h=(s+2)%i.length,o=(s+4)%i.length;(i[s]===i[h]&&i[h]===i[o]||i[s+1]===i[h+1]&&i[h+1]===i[o+1])&&(i.splice(h,2),s-=2)}return l}_project(t,e,n,i){let l=1/0,s,h,o;if(i<0){if(e<=this.ymin)return null;(s=(this.ymin-e)/i)<l&&(o=this.ymin,h=t+(l=s)*n)}else if(i>0){if(e>=this.ymax)return null;(s=(this.ymax-e)/i)<l&&(o=this.ymax,h=t+(l=s)*n)}if(n>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/n)<l&&(h=this.xmax,o=e+(l=s)*i)}else if(n<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/n)<l&&(h=this.xmin,o=e+(l=s)*i)}return[h,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const ct=2*Math.PI,D=Math.pow;function at(r){return r[0]}function ut(r){return r[1]}function ft(r){const{triangles:t,coords:e}=r;for(let n=0;n<t.length;n+=3){const i=2*t[n],l=2*t[n+1],s=2*t[n+2];if((e[s]-e[i])*(e[l+1]-e[i+1])-(e[l]-e[i])*(e[s+1]-e[i+1])>1e-10)return!1}return!0}function gt(r,t,e){return[r+Math.sin(r+t)*e,t+Math.cos(r-t)*e]}class B{static from(t,e=at,n=ut,i){return new B("length"in t?dt(t,e,n,i):Float64Array.from(_t(t,e,n,i)))}constructor(t){this._delaunator=new G(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&ft(t)){this.collinear=Int32Array.from({length:e.length/2},(f,a)=>a).sort((f,a)=>e[2*f]-e[2*a]||e[2*f+1]-e[2*a+1]);const o=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[e[2*o],e[2*o+1],e[2*c],e[2*c+1]],g=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let f=0,a=e.length/2;f<a;++f){const _=gt(e[2*f],e[2*f+1],g);e[2*f]=_[0],e[2*f+1]=_[1]}this._delaunator=new G(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),h=this._hullIndex.fill(-1);for(let o=0,c=n.length;o<c;++o){const u=l[o%3===2?o-2:o+1];(n[o]===-1||s[u]===-1)&&(s[u]=o)}for(let o=0,c=i.length;o<c;++o)h[i[o]]=o;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,i.length===2&&(s[i[1]]=0))}voronoi(t){return new ot(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:l,triangles:s,collinear:h}=this;if(h){const g=h.indexOf(t);g>0&&(yield h[g-1]),g<h.length-1&&(yield h[g+1]);return}const o=e[t];if(o===-1)return;let c=o,u=-1;do{if(yield u=s[c],c=c%3===2?c-2:c+1,s[c]!==t)return;if(c=l[c],c===-1){const g=n[(i[t]+1)%n.length];g!==u&&(yield g);return}}while(c!==o)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const i=n;let l;for(;(l=this._step(n,t,e))>=0&&l!==n&&l!==i;)n=l;return l}_step(t,e,n){const{inedges:i,hull:l,_hullIndex:s,halfedges:h,triangles:o,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,g=D(e-c[t*2],2)+D(n-c[t*2+1],2);const f=i[t];let a=f;do{let _=o[a];const y=D(e-c[_*2],2)+D(n-c[_*2+1],2);if(y<g&&(g=y,u=_),a=a%3===2?a-2:a+1,o[a]!==t)break;if(a=h[a],a===-1){if(a=l[(s[t]+1)%l.length],a!==_&&D(e-c[a*2],2)+D(n-c[a*2+1],2)<g)return a;break}}while(a!==f);return u}render(t){const e=t==null?t=new K:void 0,{points:n,halfedges:i,triangles:l}=this;for(let s=0,h=i.length;s<h;++s){const o=i[s];if(o<s)continue;const c=l[s]*2,u=l[o]*2;t.moveTo(n[c],n[c+1]),t.lineTo(n[u],n[u+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=t==null?t=new K:void 0,{points:i}=this;for(let l=0,s=i.length;l<s;l+=2){const h=i[l],o=i[l+1];t.moveTo(h+e,o),t.arc(h,o,e,0,ct)}return n&&n.value()}renderHull(t){const e=t==null?t=new K:void 0,{hull:n,points:i}=this,l=n[0]*2,s=n.length;t.moveTo(i[l],i[l+1]);for(let h=1;h<s;++h){const o=2*n[h];t.lineTo(i[o],i[o+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Z;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=e==null?e=new K:void 0,{points:i,triangles:l}=this,s=l[t*=3]*2,h=l[t+1]*2,o=l[t+2]*2;return e.moveTo(i[s],i[s+1]),e.lineTo(i[h],i[h+1]),e.lineTo(i[o],i[o+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Z;return this.renderTriangle(t,e),e.value()}}function dt(r,t,e,n){const i=r.length,l=new Float64Array(i*2);for(let s=0;s<i;++s){const h=r[s];l[s*2]=t.call(n,h,s,r),l[s*2+1]=e.call(n,h,s,r)}return l}function*_t(r,t,e,n){let i=0;for(const l of r)yield t.call(n,l,i,r),yield e.call(n,l,i,r),++i}var q=function(r){return typeof r=="function"?r:function(t){return t[r]}},mt=function(r){var t=r.points,e=r.x,n=e===void 0?"x":e,i=r.y,l=i===void 0?"y":i,s=q(n),h=q(l);return t.map(function(o){return[s(o),h(o)]})},yt=function(r){var t=r.points,e=r.width,n=r.height,i=r.debug,l=B.from(t),s=i?l.voronoi([0,0,e,n]):void 0;return{delaunay:l,voronoi:s}},bt=function(r){var t=r.points,e=r.x,n=r.y,i=r.width,l=r.height,s=r.debug,h=E.useMemo(function(){return mt({points:t,x:e,y:n})},[t,e,n]);return E.useMemo(function(){return yt({points:h,width:i,height:l,debug:s})},[h,i,l,s])},xt=function(r){var t=r.nodes,e=r.width,n=r.height,i=r.x,l=r.y,s=r.onMouseEnter,h=r.onMouseMove,o=r.onMouseLeave,c=r.onClick,u=r.debug,g=E.useRef(null),f=E.useState(null),a=f[0],_=f[1],y=bt({points:t,x:i,y:l,width:e,height:n,debug:u}),b=y.delaunay,x=y.voronoi,T=E.useMemo(function(){if(u&&x)return x.render()},[u,x]),M=E.useCallback(function(A){if(!g.current)return[null,null];var v=et(g.current,A),d=v[0],m=v[1],w=b.find(d,m);return[w,w!==void 0?t[w]:null]},[g,b]),C=E.useCallback(function(A){var v=M(A),d=v[0],m=v[1];_(d),m&&(s==null||s(m,A))},[M,_,s]),z=E.useCallback(function(A){var v=M(A),d=v[0],m=v[1];_(d),m&&(h==null||h(m,A))},[M,_,h]),j=E.useCallback(function(A){if(_(null),o){var v=void 0;a!==null&&(v=t[a]),v&&o(v,A)}},[_,a,o,t]),L=E.useCallback(function(A){var v=M(A),d=v[0],m=v[1];_(d),m&&(c==null||c(m,A))},[M,_,c]);return H.jsxs("g",{ref:g,children:[u&&x&&H.jsxs(H.Fragment,{children:[H.jsx("path",{d:T,stroke:"red",strokeWidth:1,opacity:.75}),a!==null&&H.jsx("path",{fill:"pink",opacity:.35,d:x.renderCell(a)})]}),H.jsx("rect",{width:e,height:n,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:C,onMouseMove:z,onMouseLeave:j,onClick:L})]})},vt=function(r,t){r.save(),r.globalAlpha=.75,r.beginPath(),t.render(r),r.strokeStyle="red",r.lineWidth=1,r.stroke(),r.restore()},kt=function(r,t,e){r.save(),r.globalAlpha=.35,r.beginPath(),t.renderCell(e,r),r.fillStyle="red",r.fill(),r.restore()};export{xt as O,vt as P,kt as j,bt as x};
